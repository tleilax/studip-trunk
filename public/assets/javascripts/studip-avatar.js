!function(e){var t={};function r(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=65)}({65:function(e,t){STUDIP.Avatar={image:"",readFile:function(e){if(window.FileReader&&e.files&&e.files[0]){var t,r=new window.FileReader;if(e.files[0].size<=jQuery(e).data("max-size")){var a=jQuery("div#avatar-preview"),i=a.closest('div[role="dialog"]');i.length>0?(a.css("height",i.height()-200),a.css("width",i.width()-220),a.css("max-height",i.height()-200),a.css("max-width",i.width()-220)):(i=jQuery("#layout_content"),jQuery("html").hasClass("responsified")?(a.css("height",i.height()-220),a.css("width",.95*i.width()),a.css("max-height",220*i.height()),a.css("max-width",.95*i.width())):(a.css("height",i.height()-100),a.css("width",i.width()-200),a.css("max-height",220*i.height()),a.css("max-width",i.width()-100))),r.onload=function(e){STUDIP.Avatar.image=jQuery("#new-avatar"),STUDIP.Avatar.image.attr("src",e.target.result),STUDIP.Avatar.image.cropper({aspectRatio:1,viewMode:2}),t=STUDIP.Avatar.image.data("cropper")},r.readAsDataURL(e.files[0]),jQuery("#avatar-buttons").removeClass("hidden-js"),jQuery("label.file-upload").hide(),jQuery("#avatar-zoom-in").on("click",function(){return t.zoom(.1),!1}),jQuery("#avatar-zoom-out").on("click",function(){return t.zoom(-.1),!1}),jQuery("#avatar-rotate-clockwise").on("click",function(){return t.rotate(90),!1}),jQuery("#avatar-rotate-counter-clockwise").on("click",function(){return t.rotate(-90),!1}),jQuery("#submit-avatar").on("click",function(){jQuery("#cropped-image").attr("value",STUDIP.Avatar.image.cropper("getCroppedCanvas").toDataURL())})}else alert(jQuery(e).data("message-too-large"))}else alert("Sorry - your browser doesn't support the FileReader API")},checkImageSize:function(){var e=STUDIP.Avatar.image.cropper("getData");return!(e.width<250||e.height<250)||confirm(jQuery("#new-avatar").data("message-too-small"))}},function(e,t){"use strict";jQuery(function(){jQuery(document).on("dialog-update",function(){jQuery("#avatar-upload").on("change",function(){t.Avatar.readFile(this)}),jQuery("form.settings-avatar").on("submit",function(e){return t.Avatar.checkImageSize(e)})}),jQuery("#avatar-upload").on("change",function(){t.Avatar.readFile(this)}),jQuery("form.settings-avatar").on("submit",function(e){return t.Avatar.checkImageSize(e)})})}(jQuery,STUDIP)}});
//# sourceMappingURL=studip-avatar.js.map