!function(e){var t={};function a(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(r,i,function(t){return e[t]}.bind(null,i));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=65)}({65:function(e,t){STUDIP.Avatar={image:"",init:function(e){$(document).on("change",e,function(){STUDIP.Avatar.readFile(this),$(this).off("submit.avatar","form.settings-avatar").on("submit.avatar","form.settings-avatar",function(){var e=STUDIP.Avatar.image.cropper("getData");return STUDIP.Avatar.checkImageSize(e)})})},readFile:function(e){if(window.FileReader&&e.files&&e.files[0]){var t=new window.FileReader;if(e.files[0].size<=jQuery(e).data("max-size")){var a=jQuery("div#avatar-preview"),r=a.closest('div[role="dialog"]');r.length>0?(a.css("height",r.height()-200),a.css("width",r.width()-220),a.css("max-height",r.height()-200),a.css("max-width",r.width()-220)):(r=jQuery("#layout_content"),jQuery("html").hasClass("responsified")?(a.css("height",r.height()-220),a.css("width",.95*r.width()),a.css("max-height",220*r.height()),a.css("max-width",.95*r.width())):(a.css("height",r.height()-100),a.css("width",r.width()-200),a.css("max-height",220*r.height()),a.css("max-width",r.width()-100))),t.onload=function(e){STUDIP.Avatar.image=jQuery("#new-avatar"),STUDIP.Avatar.image.attr("src",e.target.result),STUDIP.Avatar.image.cropper({aspectRatio:1,viewMode:2})},t.readAsDataURL(e.files[0]),jQuery("#avatar-buttons").removeClass("hidden-js"),jQuery("label.file-upload").hide(),jQuery("#avatar-zoom-in").on("click",function(){return STUDIP.Avatar.image.cropper("zoom",.1),!1}),jQuery("#avatar-zoom-out").on("click",function(){return STUDIP.Avatar.image.cropper("zoom",-.1),!1}),jQuery("#avatar-rotate-clockwise").on("click",function(){return STUDIP.Avatar.image.cropper("rotate",90),!1}),jQuery("#avatar-rotate-counter-clockwise").on("click",function(){return STUDIP.Avatar.image.cropper("rotate",-90),!1}),jQuery("#submit-avatar").on("click",function(){jQuery("#cropped-image").attr("value",STUDIP.Avatar.image.cropper("getCroppedCanvas").toDataURL())})}else alert(jQuery(e).data("message-too-large"))}else alert("Sorry - your browser doesn't support the FileReader API")},checkImageSize:function(e){return!(e.width<250||e.height<250)||confirm(jQuery("#new-avatar").data("message-too-small"))}},jQuery(function(){STUDIP.Avatar.init("#avatar-upload")})}});
//# sourceMappingURL=studip-avatar.js.map