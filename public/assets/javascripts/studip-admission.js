!function(a){var s={};function i(e){if(s[e])return s[e].exports;var t=s[e]={i:e,l:!1,exports:{}};return a[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=a,i.c=s,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="Rdzv")}({Rdzv:function(e,t,a){"use strict";a.r(t);a("h1RJ"),a("qd03")},h1RJ:function(e,t,a){"use strict";!function(){if(!jQuery||!jQuery.jstree){var r,s,e,t,d,a,i,n,o,u,l,c,h,_,p,g,f,m,j,v,x,k,b,y,w,C,T,A,I,S,q,N,$,D,O=!1,P=!1,F=!1;!function(l){l.vakata={},l.vakata.css={get_css:function(e,t,a){e=e.toLowerCase();var s=a.cssRules||a.rules,i=0;do{if(s.length&&i>s.length+5)return!1;if(s[i].selectorText&&s[i].selectorText.toLowerCase()==e)return!0===t?(a.removeRule&&a.removeRule(i),a.deleteRule&&a.deleteRule(i),!0):s[i]}while(s[++i]);return!1},add_css:function(e,t){return!l.jstree.css.get_css(e,!1,t)&&(t.insertRule?t.insertRule(e+" { }",0):t.addRule(e,null,0),l.vakata.css.get_css(e))},remove_css:function(e,t){return l.vakata.css.get_css(e,!0,t)},add_sheet:function(e){var t=!1,a=!0;if(e.str)return e.title&&(t=l("style[id='"+e.title+"-stylesheet']")[0]),t?a=!1:((t=document.createElement("style")).setAttribute("type","text/css"),e.title&&t.setAttribute("id",e.title+"-stylesheet")),t.styleSheet?a?(document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet.cssText=e.str):t.styleSheet.cssText=t.styleSheet.cssText+" "+e.str:(t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t)),t.sheet||t.styleSheet;if(e.url){if(!document.createStyleSheet)return(t=document.createElement("link")).rel="stylesheet",t.type="text/css",t.media="all",t.href=e.url,document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet;try{t=document.createStyleSheet(e.url)}catch(e){}}}};var d=[],i=-1,c={},o={};l.fn.jstree=function(r){var e="string"==typeof r,o=Array.prototype.slice.call(arguments,1),a=this;if(e){if("_"==r.substring(0,1))return a;this.each(function(){var e=d[l.data(this,"jstree_instance_id")],t=e&&l.isFunction(e[r])?e[r].apply(e,o):e;if(void 0!==t&&(0===r.indexOf("is_")||!0!==t&&!1!==t))return a=t,!1})}else this.each(function(){var a=l.data(this,"jstree_instance_id"),e=[],t=r?l.extend({},!0,r):{},s=l(this),i=!1,n=[];e=e.concat(o),s.data("jstree")&&e.push(s.data("jstree")),t=e.length?l.extend.apply(null,[!0,t].concat(e)):t,void 0!==a&&d[a]&&d[a].destroy(),a=parseInt(d.push({}),10)-1,l.data(this,"jstree_instance_id",a),t.plugins=l.isArray(t.plugins)?t.plugins:l.jstree.defaults.plugins.slice(),t.plugins.unshift("core"),t.plugins=t.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),(i=l.extend(!0,{},l.jstree.defaults,t)).plugins=t.plugins,l.each(c,function(e,t){-1===l.inArray(e,i.plugins)?(i[e]=null,delete i[e]):n.push(e)}),i.plugins=n,d[a]=new l.jstree._instance(a,l(this).addClass("jstree jstree-"+a),i),l.each(d[a]._get_settings().plugins,function(e,t){d[a].data[t]={}}),l.each(d[a]._get_settings().plugins,function(e,t){c[t]&&c[t].__init.apply(d[a])}),setTimeout(function(){d[a]&&d[a].init()},0)});return a},l.jstree={defaults:{plugins:[]},_focused:function(){return d[i]||null},_reference:function(e){if(d[e])return d[e];var t=l(e);return t.length||"string"!=typeof e||(t=l("#"+e)),t.length&&d[t.closest(".jstree").data("jstree_instance_id")]||null},_instance:function(e,t,a){this.data={core:{}},this.get_settings=function(){return l.extend(!0,{},a)},this._get_settings=function(){return a},this.get_index=function(){return e},this.get_container=function(){return t},this.get_container_ul=function(){return t.children("ul:eq(0)")},this._set_settings=function(e){a=l.extend(!0,{},a,e)}},_fn:{},plugin:function(e,t){t=l.extend({},{__init:l.noop,__destroy:l.noop,_fn:{},defaults:!1},t),c[e]=t,l.jstree.defaults[e]=t.defaults,l.each(t._fn,function(n,r){r.plugin=e,r.old=l.jstree._fn[n],l.jstree._fn[n]=function(){var e,t=r,a=Array.prototype.slice.call(arguments),s=new l.Event("before.jstree"),i=!1;if(!0!==this.data.core.locked||"unlock"===n||"is_locked"===n){do{if(t&&t.plugin&&-1!==l.inArray(t.plugin,this._get_settings().plugins))break;t=t.old}while(t);if(t){if(0===n.indexOf("_"))e=t.apply(this,a);else{if(!1===(e=this.get_container().triggerHandler(s,{func:n,inst:this,args:a,plugin:t.plugin})))return;void 0!==e&&(a=e),e=t.apply(l.extend({},this,{__callback:function(e){this.get_container().triggerHandler(n+".jstree",{inst:this,args:a,rslt:e,rlbk:i})},__rollback:function(){return i=this.get_rollback()},__call_old:function(e){return t.old.apply(this,e?Array.prototype.slice.call(arguments,1):a)}}),a)}return e}}},l.jstree._fn[n].old=r.old,l.jstree._fn[n].plugin=e})},rollback:function(e){e&&(l.isArray(e)||(e=[e]),l.each(e,function(e,t){d[t.i].set_rollback(t.h,t.d)}))}},l.jstree._fn=l.jstree._instance.prototype={},l(function(){var e=navigator.userAgent.toLowerCase(),t=(e.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],a=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(/msie/.test(e)&&6==parseInt(t,10)){O=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}a+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(e)&&7==parseInt(t,10)&&(P=!0,a+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),!/compatible/.test(e)&&/mozilla/.test(e)&&parseFloat(t,10)<1.9&&(F=!0,a+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "),l.vakata.css.add_sheet({str:a,title:"jstree"})}),l.jstree.plugin("core",{__init:function(){this.data.core.locked=!1,this.data.core.to_open=this.get_settings().core.initially_open,this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus(),this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl"),this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>"),this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",l.proxy(function(e){var t=l(e.target);this.toggle_node(t)},this)).bind("mousedown.jstree",l.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(e){var t;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(e){}}}),this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",l.proxy(function(e,t){var a=this._get_node(t.rslt.obj),s=this;-1===a&&(a=this.get_container_ul()),a.length&&a.find("li").each(function(){var a=l(this);a.data("jstree")&&l.each(a.data("jstree"),function(e,t){s.data[e]&&l.isFunction(s["_"+e+"_notify"])&&s["_"+e+"_notify"].call(s,a,t)})})},this)),this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",l.proxy(function(e,t){var a=this._get_node(t.rslt.obj),s=this;-1===a&&(a=this.get_container_ul()),a.length&&a.find("li.jstree-open:not(:has(ul))").each(function(){s.load_node(this,l.noop,l.noop)})},this)),this.__callback(),this.load_node(-1,function(){this.loaded(),this.reload_nodes()})},destroy:function(){var e,t=this.get_index(),a=this._get_settings(),s=this;if(l.each(a.plugins,function(e,t){try{c[t].__destroy.apply(s)}catch(e){}}),this.__callback(),this.is_focused())for(e in d)if(d.hasOwnProperty(e)&&e!=t){d[e].set_focus();break}t===i&&(i=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),l(document).unbind(".jstree-"+t).undelegate(".jstree-"+t),d[t]=null,delete d[t]},_core_notify:function(e,t){t.opened&&this.open_node(e,!1,!0)},lock:function(){this.data.core.locked=!0,this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7"),this.__callback({})},unlock:function(){this.data.core.locked=!1,this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1"),this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var e=this;this.data.core.to_open=[],this.get_container_ul().find("li.jstree-open").each(function(){this.id&&e.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(e.data.core.to_open)},save_loaded:function(){},reload_nodes:function(e){var a=this,s=!0,i=[],n=[];e||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=l.map(l.makeArray(this.data.core.to_open),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=l.map(l.makeArray(this.data.core.to_load),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open))),this.data.core.to_load.length&&(l.each(this.data.core.to_load,function(e,t){if("#"==t)return!0;l(t).length?i.push(t):n.push(t)}),i.length&&(this.data.core.to_load=n,l.each(i,function(e,t){a._is_loaded(t)||(a.load_node(t,function(){a.reload_nodes(!0)},function(){a.reload_nodes(!0)}),s=!1)}))),this.data.core.to_open.length&&l.each(this.data.core.to_open,function(e,t){a.open_node(t,!1,!0)}),s&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){a.__callback({},a)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&l.each(this.data.core.to_open,function(e,t){a.open_node(t,!1,!0)}),this.__callback({})},refresh:function(e){var t=this;this.save_opened(),e||(e=-1),(e=this._get_node(e))||(e=-1),-1!==e?e.children("UL").remove():this.get_container_ul().empty(),this.load_node(e,function(){t.__callback({obj:e}),t.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var e=l.jstree._focused();e&&e.unset_focus(),this.get_container().addClass("jstree-focused"),i=this.get_index(),this.__callback()}},is_focused:function(){return i==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),i=-1),this.__callback()},_get_node:function(e){var t=l(e,this.get_container());return t.is(".jstree")||-1==e?-1:!!(t=t.closest("li",this.get_container())).length&&t},_get_next:function(e,t){return-1===(e=this._get_node(e))?this.get_container().find("> ul > li:first-child"):!!e.length&&(t?0<e.nextAll("li").size()&&e.nextAll("li:eq(0)"):e.hasClass("jstree-open")?e.find("li:eq(0)"):0<e.nextAll("li").size()?e.nextAll("li:eq(0)"):e.parentsUntil(".jstree","li").next("li").eq(0))},_get_prev:function(e,t){if(-1===(e=this._get_node(e)))return this.get_container().find("> ul > li:last-child");if(!e.length)return!1;if(t)return 0<e.prevAll("li").length&&e.prevAll("li:eq(0)");if(e.prev("li").length){for(e=e.prev("li").eq(0);e.hasClass("jstree-open");)e=e.children("ul:eq(0)").children("li:last");return e}var a=e.parentsUntil(".jstree","li:eq(0)");return!!a.length&&a},_get_parent:function(e){if(-1==(e=this._get_node(e))||!e.length)return!1;var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},_get_children:function(e){return-1===(e=this._get_node(e))?this.get_container().children("ul:eq(0)").children("li"):!!e.length&&e.children("ul:eq(0)").children("li")},get_path:function(e,t){var a=[],s=this;return!(-1===(e=this._get_node(e))||!e||!e.length)&&(e.parentsUntil(".jstree","li").each(function(){a.push(t?this.id:s.get_text(this))}),a.reverse(),a.push(t?e.attr("id"):this.get_text(e)),a)},_get_string:function(e){return this._get_settings().core.strings[e]||e},is_open:function(e){return(e=this._get_node(e))&&-1!==e&&e.hasClass("jstree-open")},is_closed:function(e){return(e=this._get_node(e))&&-1!==e&&e.hasClass("jstree-closed")},is_leaf:function(e){return(e=this._get_node(e))&&-1!==e&&e.hasClass("jstree-leaf")},correct_state:function(e){if(!(e=this._get_node(e))||-1===e)return!1;e.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},open_node:function(e,t,a){if(!(e=this._get_node(e)).length)return!1;if(!e.hasClass("jstree-closed"))return t&&t.call(),!1;var s=a||O?0:this._get_settings().core.animation,i=this;this._is_loaded(e)?(this._get_settings().core.open_parents&&e.parentsUntil(".jstree",".jstree-closed").each(function(){i.open_node(this,!1,!0)}),s&&e.children("ul").css("display","none"),e.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),s?e.children("ul").stop(!0,!0).slideDown(s,function(){this.style.display="",i.after_open(e)}):i.after_open(e),this.__callback({obj:e}),t&&t.call()):(e.children("a").addClass("jstree-loading"),this.load_node(e,function(){i.open_node(e,t,a)},t))},after_open:function(e){this.__callback({obj:e})},close_node:function(e,t){e=this._get_node(e);var a=t||O?0:this._get_settings().core.animation,s=this;if(!e.length||!e.hasClass("jstree-open"))return!1;a&&e.children("ul").attr("style","display:block !important"),e.removeClass("jstree-open").addClass("jstree-closed"),a?e.children("ul").stop(!0,!0).slideUp(a,function(){this.style.display="",s.after_close(e)}):s.after_close(e),this.__callback({obj:e})},after_close:function(e){this.__callback({obj:e})},toggle_node:function(e){return(e=this._get_node(e)).hasClass("jstree-closed")?this.open_node(e):e.hasClass("jstree-open")?this.close_node(e):void 0},open_all:function(e,t,a){(e=e?this._get_node(e):-1)&&-1!==e||(e=this.get_container_ul()),e=a?e.find("li.jstree-closed"):(a=e).is(".jstree-closed")?e.find("li.jstree-closed").addBack():e.find("li.jstree-closed");var s=this;e.each(function(){var e=this;s._is_loaded(this)?s.open_node(this,!1,!t):s.open_node(this,function(){s.open_all(e,t,a)},!t)}),0===a.find("li.jstree-closed").length&&this.__callback({obj:a})},close_all:function(e,t){var a=this;(e=e?this._get_node(e):this.get_container())&&-1!==e||(e=this.get_container_ul()),e.find("li.jstree-open").addBack().each(function(){a.close_node(this,!t)}),this.__callback({obj:e})},clean_node:function(e){(e=(e=e&&-1!=e?l(e):this.get_container_ul()).is("li")?e.find("li").addBack():e.find("li")).removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),e.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(e,t){this.get_container().empty().append(e),this.data=t,this.__callback()},load_node:function(e,t,a){this.__callback({obj:e})},_is_loaded:function(e){return!0},create_node:function(e,t,a,s,i){e=this._get_node(e),t=void 0===t?"last":t;var n,r=l("<li />"),o=this._get_settings().core;if(-1!==e&&!e.length)return!1;if(!i&&!this._is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,a,s,!0)}),!1;switch(this.__rollback(),"string"==typeof a&&(a={data:a}),a||(a={}),a.attr&&r.attr(a.attr),a.metadata&&r.data(a.metadata),a.state&&r.addClass("jstree-"+a.state),a.data||(a.data=this._get_string("new_node")),l.isArray(a.data)||(n=a.data,a.data=[],a.data.push(n)),l.each(a.data,function(e,t){n=l("<a />"),l.isFunction(t)&&(t=t.call(this,a)),"string"==typeof t?n.attr("href","#")[o.html_titles?"html":"text"](t):(t.attr||(t.attr={}),t.attr.href||(t.attr.href="#"),n.attr(t.attr)[o.html_titles?"html":"text"](t.title),t.language&&n.addClass(t.language)),n.prepend("<ins class='jstree-icon'>&#160;</ins>"),!t.icon&&a.icon&&(t.icon=a.icon),t.icon&&(-1===t.icon.indexOf("/")?n.children("ins").addClass(t.icon):n.children("ins").css("background","url('"+t.icon+"') center center no-repeat")),r.append(n)}),r.prepend("<ins class='jstree-icon'>&#160;</ins>"),-1===e&&(e=this.get_container(),"before"===t&&(t="first"),"after"===t&&(t="last")),t){case"before":e.before(r),n=this._get_parent(e);break;case"after":e.after(r),n=this._get_parent(e);break;case"inside":case"first":e.children("ul").length||e.append("<ul />"),e.children("ul").prepend(r),n=e;break;case"last":e.children("ul").length||e.append("<ul />"),e.children("ul").append(r),n=e;break;default:e.children("ul").length||e.append("<ul />"),t||(t=0),(n=e.children("ul").children("li").eq(t)).length?n.before(r):e.children("ul").append(r),n=e}return-1!==n&&n.get(0)!==this.get_container().get(0)||(n=-1),this.clean_node(n),this.__callback({obj:r,parent:n}),s&&s.call(this,r),r},get_text:function(e){if(!(e=this._get_node(e)).length)return!1;var t=this._get_settings().core.html_titles;return e=e.children("a:eq(0)"),t?((e=e.clone()).children("INS").remove(),e.html()):(e=e.contents().filter(function(){return 3==this.nodeType})[0]).nodeValue},set_text:function(e,t){if(!(e=this._get_node(e)).length)return!1;if(e=e.children("a:eq(0)"),this._get_settings().core.html_titles){var a=e.children("INS").clone();return e.html(t).prepend(a),this.__callback({obj:e,name:t}),!0}return e=e.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:e,name:t}),e.nodeValue=t},rename_node:function(e,t){e=this._get_node(e),this.__rollback(),e&&e.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:e,name:t})},delete_node:function(e){if(!(e=this._get_node(e)).length)return!1;this.__rollback();var t=this._get_parent(e),a=l([]),s=this;return e.each(function(){a=a.add(s._get_prev(this))}),e=e.detach(),-1!==t&&0===t.find("> ul > li").length&&t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(t),this.__callback({obj:e,prev:a,parent:t}),e},prepare_move:function(e,t,a,s,i){var n={};if(n.ot=l.jstree._reference(e)||this,n.o=n.ot._get_node(e),n.r=-1===t?-1:this._get_node(t),n.p=void 0===a||!1===a?"last":a,!i&&o.o&&o.o[0]===n.o[0]&&o.r[0]===n.r[0]&&o.p===n.p)return this.__callback(o),void(s&&s.call(this,o));if(n.ot=l.jstree._reference(n.o)||this,n.rt=l.jstree._reference(n.r)||this,-1!==n.r&&n.r){if(!/^(before|after)$/.test(n.p)&&!this._is_loaded(n.r))return this.load_node(n.r,function(){this.prepare_move(e,t,a,s,!0)});switch(n.p){case"before":n.cp=n.r.index(),n.cr=n.rt._get_parent(n.r);break;case"after":n.cp=n.r.index()+1,n.cr=n.rt._get_parent(n.r);break;case"inside":case"first":n.cp=0,n.cr=n.r;break;case"last":n.cp=n.r.find(" > ul > li").length,n.cr=n.r;break;default:n.cp=n.p,n.cr=n.r}}else switch(n.cr=-1,n.p){case"first":case"before":case"inside":n.cp=0;break;case"after":case"last":n.cp=n.rt.get_container().find(" > ul > li").length;break;default:n.cp=n.p}n.np=-1==n.cr?n.rt.get_container():n.cr,n.op=n.ot._get_parent(n.o),n.cop=n.o.index(),-1===n.op&&(n.op=n.ot?n.ot.get_container():this.get_container()),!/^(before|after)$/.test(n.p)&&n.op&&n.np&&n.op[0]===n.np[0]&&n.o.index()<n.cp&&n.cp++,n.or=n.np.find(" > ul > li:nth-child("+(n.cp+1)+")"),o=n,this.__callback(o),s&&s.call(this,o)},check_move:function(){var e=o,t=!0,a=-1===e.r?this.get_container():e.r;if(!e||!e.o||e.or[0]===e.o[0])return!1;if(!e.cy){if(e.op&&e.np&&e.op[0]===e.np[0]&&e.cp-1===e.o.index())return!1;e.o.each(function(){if(-1!==a.parentsUntil(".jstree","li").addBack().index(this))return t=!1})}return t},move_node:function(e,t,a,s,i,n){if(!i)return this.prepare_move(e,t,a,function(e){this.move_node(e,!1,!1,s,!0,n)});if(s&&(o.cy=!0),!n&&!this.check_move())return!1;this.__rollback();var r=!1;s?(r=e.o.clone(!0)).find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)}):r=e.o,e.or.length?e.or.before(r):(e.np.children("ul").length||l("<ul />").appendTo(e.np),e.np.children("ul:eq(0)").append(r));try{e.ot.clean_node(e.op),e.rt.clean_node(e.np),e.op.find("> ul > li").length||e.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(e){}return s&&(o.cy=!0,o.oc=r),this.__callback(o),o},_get_move:function(){return o}}})}(jQuery),(r=jQuery)(function(){/msie/.test(navigator.userAgent.toLowerCase())?(e=r('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),t=r('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),s=e.width()-t.width(),e.add(t).remove()):(e=r("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),s=100-e.width(),e.parent().remove())}),r.jstree.plugin("ui",{__init:function(){this.data.ui.selected=r(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",r.proxy(function(e){e.preventDefault(),e.currentTarget.blur(),r(e.currentTarget).hasClass("jstree-loading")||this.select_node(e.currentTarget,!0,e)},this)).delegate("a","mouseenter.jstree",r.proxy(function(e){r(e.currentTarget).hasClass("jstree-loading")||this.hover_node(e.target)},this)).delegate("a","mouseleave.jstree",r.proxy(function(e){r(e.currentTarget).hasClass("jstree-loading")||this.dehover_node(e.target)},this)).bind("reopen.jstree",r.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",r.proxy(function(){this.dehover_node(),this.save_selected()},this)).bind("set_rollback.jstree",r.proxy(function(){this.reselect()},this)).bind("close_node.jstree",r.proxy(function(e,t){var a=this._get_settings().ui,s=this._get_node(t.rslt.obj),i=s&&s.length?s.children("ul").find("a.jstree-clicked"):r(),n=this;!1!==a.selected_parent_close&&i.length&&i.each(function(){n.deselect_node(this),"select_parent"===a.selected_parent_close&&n.select_node(s)})},this)).bind("delete_node.jstree",r.proxy(function(e,t){var a=this._get_settings().ui.select_prev_on_delete,s=this._get_node(t.rslt.obj),i=s&&s.length?s.find("a.jstree-clicked"):[],n=this;i.each(function(){n.deselect_node(this)}),a&&i.length&&t.rslt.prev.each(function(){if(this.parentNode)return n.select_node(this),!1})},this)).bind("move_node.jstree",r.proxy(function(e,t){t.rslt.cy&&t.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(e,t){if(null==e)return t?this.data.ui.selected:this.data.ui.last_selected;var a=r(e,this.get_container());return a.is(".jstree")||-1==e?-1:!!(a=a.closest("li",this.get_container())).length&&a},_ui_notify:function(e,t){t.selected&&this.select_node(e,!1)},save_selected:function(){var e=this;this.data.ui.to_select=[],this.data.ui.selected.each(function(){this.id&&e.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(this.data.ui.to_select)},reselect:function(){var a=this,e=this.data.ui.to_select;e=r.map(r.makeArray(e),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),r.each(e,function(e,t){t&&"#"!==t&&a.select_node(t)}),this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode}),this.__callback()},refresh:function(e){return this.save_selected(),this.__call_old()},hover_node:function(e){if(!(e=this._get_node(e)).length)return!1;e.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent(),this._fix_scroll(e),this.__callback({obj:e})},dehover_node:function(){var e,t=this.data.ui.hovered;if(!t||!t.length)return!1;e=t.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===e[0]&&(this.data.ui.hovered=null),this.__callback({obj:t})},select_node:function(e,t,a){if(-1==(e=this._get_node(e))||!e||!e.length)return!1;var s=this._get_settings().ui,i="on"==s.select_multiple_modifier||!1!==s.select_multiple_modifier&&a&&a[s.select_multiple_modifier+"Key"],n=!1!==s.select_range_modifier&&a&&a[s.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==e[0]&&this.data.ui.last_selected.parent()[0]===e.parent()[0],r=this.is_selected(e),o=!0,l=this;if(t){if(s.disable_selecting_children&&i&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked").length||e.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;switch(!(o=!1)){case n:this.data.ui.last_selected.addClass("jstree-last-selected"),e=e[e.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").addBack(),o=(-1==s.select_limit||e.length<s.select_limit)&&(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==l.data.ui.last_selected[0]&&l.deselect_node(this)}),!(r=!1));break;case r&&!i:this.deselect_all(),o=!(r=!1);break;case!r&&!i:(-1==s.select_limit||0<s.select_limit)&&(this.deselect_all(),o=!0);break;case r&&i:this.deselect_node(e);break;case!r&&i:(-1==s.select_limit||this.data.ui.selected.length+1<=s.select_limit)&&(o=!0)}}o&&!r&&(n||(this.data.ui.last_selected=e),e.children("a").addClass("jstree-clicked"),s.selected_parent_open&&e.parents(".jstree-closed").each(function(){l.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(e),this._fix_scroll(e.eq(0)),this.__callback({obj:e,e:a}))},_fix_scroll:function(e){var t,a=this.get_container()[0];if(a.scrollHeight>a.offsetHeight){if(!(e=this._get_node(e))||-1===e||!e.length||!e.is(":visible"))return;(t=e.offset().top-this.get_container().offset().top)<0&&(a.scrollTop=a.scrollTop+t-1),t+this.data.core.li_height+(a.scrollWidth>a.offsetWidth?s:0)>a.offsetHeight&&(a.scrollTop=a.scrollTop+(t-a.offsetHeight+this.data.core.li_height+1+(a.scrollWidth>a.offsetWidth?s:0)))}},deselect_node:function(e){if(!(e=this._get_node(e)).length)return!1;this.is_selected(e)&&(e.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(e),this.data.ui.last_selected.get(0)===e.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:e}))},toggle_select:function(e){if(!(e=this._get_node(e)).length)return!1;this.is_selected(e)?this.deselect_node(e):this.select_node(e)},is_selected:function(e){return 0<=this.data.ui.selected.index(this._get_node(e))},get_selected:function(e){return e?r(e).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(e){var t=e?r(e).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();t.children("a.jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=r([]),this.data.ui.last_selected=!1,this.__callback({obj:t})}}}),r.jstree.defaults.plugins.push("ui"),(d=jQuery).jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",d.proxy(function(e,t){if(this._get_settings().crrm.move.open_onmove){var a=this;t.rslt.np.parentsUntil(".jstree").addBack().filter(".jstree-closed").each(function(){a.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(e){return!0}}},_fn:{_show_input:function(a,s){a=this._get_node(a);var e=this._get_settings().core.rtl,i=this._get_settings().crrm.input_width_limit,t=a.children("ins").width(),n=a.find("> a:visible > ins").width()*a.find("> a:visible > ins").length,r=this.get_text(a),o=d("<div />",{css:{position:"absolute",top:"-200px",left:e?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),l=a.css("position","relative").append(d("<input />",{value:r,class:"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:e?"auto":t+n+4+"px",right:e?t+n+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:d.proxy(function(){var e=a.children(".jstree-rename-input"),t=e.val();""===t&&(t=r),o.remove(),e.remove(),this.set_text(a,r),this.rename_node(a,t),s.call(this,a,t,r),a.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;if(27==t)return this.value=r,void this.blur();13!=t?l.width(Math.min(o.text("pW"+this.value).width(),i)):this.blur()},keypress:function(e){if(13==(e.keyCode||e.which))return!1}})).children(".jstree-rename-input");this.set_text(a,""),o.css({fontFamily:l.css("fontFamily")||"",fontSize:l.css("fontSize")||"",fontWeight:l.css("fontWeight")||"",fontStyle:l.css("fontStyle")||"",fontStretch:l.css("fontStretch")||"",fontVariant:l.css("fontVariant")||"",letterSpacing:l.css("letterSpacing")||"",wordSpacing:l.css("wordSpacing")||""}),l.width(Math.min(o.text("pW"+l[0].value).width(),i))[0].select()},rename:function(e){e=this._get_node(e),this.__rollback();var s=this.__callback;this._show_input(e,function(e,t,a){s.call(this,{obj:e,new_name:t,old_name:a})})},create:function(e,t,a,n,r){var o=this;return(e=this._get_node(e))||(e=-1),this.__rollback(),this.create_node(e,t,a,function(e){var s=this._get_parent(e),i=d(e).index();n&&n.call(this,e),s.length&&s.hasClass("jstree-closed")&&this.open_node(s,!1,!0),r?o.__callback({obj:e,name:this.get_text(e),parent:s,position:i}):this._show_input(e,function(e,t,a){o.__callback({obj:e,name:t,parent:s,position:i})})})},remove:function(e){e=this._get_node(e,!0);var t=this._get_parent(e),a=this._get_prev(e);this.__rollback(),!1!==(e=this.delete_node(e))&&this.__callback({obj:e,prev:a,parent:t})},check_move:function(){return!!this.__call_old()&&!!this._get_settings().crrm.move.check_move.call(this,this._get_move())},move_node:function(e,t,a,s,i,n){var r=this._get_settings().crrm.move;if(!i)return void 0===a&&(a=r.default_position),"inside"!==a||r.default_position.match(/^(before|after)$/)||(a=r.default_position),this.__call_old(!0,e,t,a,s,!1,n);(!0===r.always_copy||"multitree"===r.always_copy&&e.rt.get_index()!==e.ot.get_index())&&(s=!0),this.__call_old(!0,e,t,a,s,!0,n)},cut:function(e){if(!(e=this._get_node(e,!0))||!e.length)return!1;this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=e,this.__callback({obj:e})},copy:function(e){if(!(e=this._get_node(e,!0))||!e.length)return!1;this.data.crrm.ct_nodes=!1,this.data.crrm.cp_nodes=e,this.__callback({obj:e})},paste:function(e){if(!(e=this._get_node(e))||!e.length)return!1;var t=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,e),this.data.crrm.ct_nodes=!1),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,e,!1,!0),this.__callback({obj:e,nodes:t})}}}),a=jQuery,i=[],a.jstree._themes=!1,a.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",a.proxy(function(){var e=this._get_settings().themes;this.data.themes.dots=e.dots,this.data.themes.icons=e.icons,this.set_theme(e.theme,e.url)},this)).bind("loaded.jstree",a.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(e,t){if(!e)return!1;t||(t=a.jstree._themes+e+"/style.css"),-1==a.inArray(t,i)&&(a.vakata.css.add_sheet({url:t}),i.push(t)),this.data.themes.theme!=e&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=e),this.get_container().addClass("jstree-"+e),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),a(function(){!1===a.jstree._themes&&a("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return a.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1}),!1===a.jstree._themes&&(a.jstree._themes="themes/")}),a.jstree.defaults.plugins.push("themes"),n=jQuery,o=[],n.jstree.plugin("hotkeys",{__init:function(){if(void 0===n.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";n.each(this._get_settings().hotkeys,function(t,e){!1!==e&&-1==n.inArray(t,o)&&(n(document).bind("keydown",t,function(e){return function(e,t){var a,s=n.jstree._focused();if(s&&s.data&&s.data.hotkeys&&s.data.hotkeys.enabled&&(a=s._get_settings().hotkeys[e]))return a.call(s,t)}(t,e)}),o.push(t))}),this.get_container().bind("lock.jstree",n.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",n.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this)),this.enable_hotkeys()},defaults:{up:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"ctrl+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"shift+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},down:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"ctrl+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"shift+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},left:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"ctrl+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"shift+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},right:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"ctrl+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"shift+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},space:function(){return this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click(),!1},"ctrl+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},"shift+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}}),(u=jQuery).jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(e,t){t.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(e,t,a){var s=this;this.load_node_json(e,function(){s.__callback({obj:s._get_node(e)}),t.call(this)},a)},_is_loaded:function(e){var t=this._get_settings().json_data;return-1==(e=this._get_node(e))||!e||!t.ajax&&!t.progressive_render&&!u.isFunction(t.data)||e.is(".jstree-open, .jstree-leaf")||0<e.children("ul").children("li").length},refresh:function(e){e=this._get_node(e);var t=this._get_settings().json_data;return e&&-1!==e&&t.progressive_unload&&(u.isFunction(t.data)||t.ajax)&&e.removeData("jstree_children"),this.__call_old()},load_node_json:function(i,n,r){var e,o=this.get_settings().json_data,l=function(){},t=function(){};if((i=this._get_node(i))&&-1!==i&&(o.progressive_render||o.progressive_unload)&&!i.is(".jstree-open, .jstree-leaf")&&0===i.children("ul").children("li").length&&i.data("jstree_children"))return(e=this._parse_json(i.data("jstree_children"),i))&&(i.append(e),o.progressive_unload||i.removeData("jstree_children")),this.clean_node(i),void(n&&n.call(this));if(i&&-1!==i){if(i.data("jstree_is_loading"))return;i.data("jstree_is_loading",!0)}switch(!0){case!o.data&&!o.ajax:throw"Neither data nor ajax settings supplied.";case u.isFunction(o.data):o.data.call(this,i,u.proxy(function(e){(e=this._parse_json(e,i))?(-1!==i&&i?(i.append(e).children("a.jstree-loading").removeClass("jstree-loading"),i.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),this.clean_node(i),n&&n.call(this)):(-1!==i&&i?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.removeData("jstree_is_loading"),o.correct_state&&this.correct_state(i)):o.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this))},this));break;case!!o.data&&!o.ajax||!!o.data&&!!o.ajax&&(!i||-1===i):i&&-1!=i||((e=this._parse_json(o.data,i))?(this.get_container().children("ul").empty().append(e.children()),this.clean_node()):o.correct_state&&this.get_container().children("ul").empty()),n&&n.call(this);break;case!o.data&&!!o.ajax||!!o.data&&!!o.ajax&&i&&-1!==i:l=function(e,t,a){var s=this.get_settings().json_data.ajax.error;s&&s.call(this,e,t,a),-1!=i&&i.length?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.removeData("jstree_is_loading"),"success"===t&&o.correct_state&&this.correct_state(i)):"success"===t&&o.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this)},t=function(e,t,a){var s=this.get_settings().json_data.ajax.success;if(s&&(e=s.call(this,e,t,a)||e),""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,"")||!u.isArray(e)&&!u.isPlainObject(e))return l.call(this,a,t,"");(e=this._parse_json(e,i))?(-1!==i&&i?(i.append(e).children("a.jstree-loading").removeClass("jstree-loading"),i.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),this.clean_node(i),n&&n.call(this)):-1!==i&&i?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(i),n&&n.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this))},o.ajax.context=this,o.ajax.error=l,o.ajax.success=t,o.ajax.dataType||(o.ajax.dataType="json"),u.isFunction(o.ajax.url)&&(o.ajax.url=o.ajax.url.call(this,i)),u.isFunction(o.ajax.data)&&(o.ajax.data=o.ajax.data.call(this,i)),u.ajax(o.ajax)}},_parse_json:function(a,e,t){var s,i,n,r,o,l=!1,d=this._get_settings(),c=d.json_data,h=d.core.html_titles;if(!a)return l;if(c.progressive_unload&&e&&-1!==e&&e.data("jstree_children",l),u.isArray(a)){if(l=u("<ul>"),!a.length)return!1;for(i=0,n=a.length;i<n;i++)(s=this._parse_json(a[i],e,!0)).length&&(l=l.append(s));l=l.children()}else{if("string"==typeof a&&(a={data:a}),!a.data&&""!==a.data)return l;l=u("<li />"),a.attr&&l.attr(a.attr),a.metadata&&l.data(a.metadata),a.state&&l.addClass("jstree-"+a.state),u.isArray(a.data)||(s=a.data,a.data=[],a.data.push(s)),u.each(a.data,function(e,t){s=u("<a />"),u.isFunction(t)&&(t=t.call(this,a)),"string"==typeof t?s.attr("href","#")[h?"html":"text"](t):(t.attr||(t.attr={}),t.attr.href||(t.attr.href="#"),s.attr(t.attr)[h?"html":"text"](t.title),t.language&&s.addClass(t.language)),s.prepend("<ins class='jstree-icon'>&#160;</ins>"),!t.icon&&a.icon&&(t.icon=a.icon),t.icon&&(-1===t.icon.indexOf("/")?s.children("ins").addClass(t.icon):s.children("ins").css("background","url('"+t.icon+"') center center no-repeat")),l.append(s)}),l.prepend("<ins class='jstree-icon'>&#160;</ins>"),a.children&&(c.progressive_render&&"open"!==a.state?l.addClass("jstree-closed").data("jstree_children",a.children):(c.progressive_unload&&l.data("jstree_children",a.children),u.isArray(a.children)&&a.children.length&&(s=this._parse_json(a.children,e,!0)).length&&((o=u("<ul />")).append(s),l.append(o))))}return t||((r=u("<ul />")).append(l),l=r),l},get_json:function(e,t,a,s){var i,n,r,o,l,d,c=[],h=this._get_settings(),_=this;return(e=this._get_node(e))&&-1!==e||(e=this.get_container().find("> ul > li")),t=u.isArray(t)?t:["id","class"],!s&&this.data.types&&t.push(h.types.type_attr),a=u.isArray(a)?a:[],e.each(function(){r=u(this),i={data:[]},t.length&&(i.attr={}),u.each(t,function(e,t){(n=r.attr(t))&&n.length&&n.replace(/jstree[^ ]*/gi,"").length&&(i.attr[t]=(" "+n).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))}),r.hasClass("jstree-open")&&(i.state="open"),r.hasClass("jstree-closed")&&(i.state="closed"),r.data()&&(i.metadata=r.data()),(o=r.children("a")).each(function(){l=u(this),a.length||-1!==u.inArray("languages",h.plugins)||l.children("ins").get(0).style.backgroundImage.length||l.children("ins").get(0).className&&l.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").length?(d=!1,-1!==u.inArray("languages",h.plugins)&&u.isArray(h.languages)&&h.languages.length&&u.each(h.languages,function(e,t){if(l.hasClass(t))return d=t,!1}),n={attr:{},title:_.get_text(l,d)},u.each(a,function(e,t){n.attr[t]=(" "+(l.attr(t)||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")}),-1!==u.inArray("languages",h.plugins)&&u.isArray(h.languages)&&h.languages.length&&u.each(h.languages,function(e,t){if(l.hasClass(t))return n.language=t,!0}),l.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(n.icon=l.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")),l.children("ins").get(0).style.backgroundImage.length&&(n.icon=l.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):n=_.get_text(l),1<o.length?i.data.push(n):i.data=n}),(r=r.find("> ul > li")).length&&(i.children=_.get_json(r,t,a,!0)),c.push(i)}),c}}}),l=jQuery,c=!1,l.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(e){var t=this._get_settings().languages,a=!1,s=".jstree-"+this.get_index()+" a";if(!l.isArray(t)||0===t.length)return!1;if(-1==l.inArray(e,t)){if(!t[e])return!1;e=t[e]}return e==this.data.languages.current_language||(!1!==(a=l.vakata.css.get_css(s+"."+this.data.languages.current_language,!1,c))&&(a.style.display="none"),!1!==(a=l.vakata.css.get_css(s+"."+e,!1,c))&&(a.style.display=""),this.data.languages.current_language=e,this.__callback(e)),!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(e,t){var a=this._get_settings().languages,s=this._get_settings().core.strings;return l.isArray(a)&&a.length&&(t=t&&-1!=l.inArray(t,a)?t:this.data.languages.current_language),s[t]&&s[t][e]?s[t][e]:s[e]?s[e]:e},get_text:function(e,t){if(!(e=this._get_node(e)||this.data.ui.last_selected).size())return!1;var a=this._get_settings().languages,s=this._get_settings().core.html_titles;return e=l.isArray(a)&&a.length?(t=t&&-1!=l.inArray(t,a)?t:this.data.languages.current_language,e.children("a."+t)):e.children("a:eq(0)"),s?((e=e.clone()).children("INS").remove(),e.html()):(e=e.contents().filter(function(){return 3==this.nodeType})[0]).nodeValue},set_text:function(e,t,a){if(!(e=this._get_node(e)||this.data.ui.last_selected).size())return!1;var s,i=this._get_settings().languages,n=this._get_settings().core.html_titles;return e=l.isArray(i)&&i.length?(a=a&&-1!=l.inArray(a,i)?a:this.data.languages.current_language,e.children("a."+a)):e.children("a:eq(0)"),n?(s=e.children("INS").clone(),e.html(t).prepend(s),this.__callback({obj:e,name:t,lang:a}),!0):(e=e.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:e,name:t,lang:a}),e.nodeValue=t)},_load_css:function(){var e,t=this._get_settings().languages,a="/* languages css */",s=".jstree-"+this.get_index()+" a";if(l.isArray(t)&&t.length){for(this.data.languages.current_language=t[0],e=0;e<t.length;e++)a+=s+"."+t[e]+" {",t[e]!=this.data.languages.current_language&&(a+=" display:none; "),a+=" } ";c=l.vakata.css.add_sheet({str:a,title:"jstree-languages"})}},create_node:function(e,t,a,i){return this.__call_old(!0,e,t,a,function(e){var t,a=this._get_settings().languages,s=e.children("a");if(l.isArray(a)&&a.length){for(t=0;t<a.length;t++)s.is("."+a[t])||e.append(s.eq(0).clone().removeClass(a.join(" ")).addClass(a[t]));s.not("."+a.join(", .")).remove()}i&&i.call(this,e)})}}}),(h=jQuery).jstree.plugin("cookies",{__init:function(){if(void 0===h.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var e,t=this._get_settings().cookies;t.save_loaded&&(e=h.cookie(t.save_loaded))&&e.length&&(this.data.core.to_load=e.split(",")),t.save_opened&&(e=h.cookie(t.save_opened))&&e.length&&(this.data.core.to_open=e.split(",")),t.save_selected&&(e=h.cookie(t.save_selected))&&e.length&&this.data.ui&&(this.data.ui.to_select=e.split(",")),this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",h.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",h.proxy(function(e){this._get_settings().cookies.auto_save&&this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(e){if(!this.data.core.refreshing){var t=this._get_settings().cookies;if(!e)return t.save_loaded&&(this.save_loaded(),h.cookie(t.save_loaded,this.data.core.to_load.join(","),t.cookie_options)),t.save_opened&&(this.save_opened(),h.cookie(t.save_opened,this.data.core.to_open.join(","),t.cookie_options)),void(t.save_selected&&this.data.ui&&(this.save_selected(),h.cookie(t.save_selected,this.data.ui.to_select.join(","),t.cookie_options)));switch(e){case"open_node":case"close_node":t.save_opened&&(this.save_opened(),h.cookie(t.save_opened,this.data.core.to_open.join(","),t.cookie_options)),t.save_loaded&&(this.save_loaded(),h.cookie(t.save_loaded,this.data.core.to_load.join(","),t.cookie_options));break;case"select_node":case"deselect_node":t.save_selected&&this.data.ui&&(this.save_selected(),h.cookie(t.save_selected,this.data.ui.to_select.join(","),t.cookie_options))}}}}}),(_=jQuery).jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",_.proxy(function(e,t){var a=this._get_node(t.rslt.obj);a=-1===a?this.get_container().children("ul"):a.children("ul"),this.sort(a)},this)).bind("rename_node.jstree create_node.jstree create.jstree",_.proxy(function(e,t){this.sort(t.rslt.obj.parent())},this)).bind("move_node.jstree",_.proxy(function(e,t){var a=-1==t.rslt.np?this.get_container():t.rslt.np;this.sort(a.children("ul"))},this))},defaults:function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},_fn:{sort:function(e){var t=this._get_settings().sort,a=this;e.append(_.makeArray(e.children("li")).sort(_.proxy(t,a))),e.find("> li > ul").each(function(){a.sort(_(this))}),this.clean_node(e)}}}),p=jQuery,y=b=k=x=v=j=m=f=g=!1,p.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(e,t,a){p.vakata.dnd.is_drag&&p.vakata.drag_stop({});try{e.currentTarget.unselectable="on",e.currentTarget.onselectstart=function(){return!1},e.currentTarget.style&&(e.currentTarget.style.MozUserSelect="none")}catch(e){}return p.vakata.dnd.init_x=e.pageX,p.vakata.dnd.init_y=e.pageY,p.vakata.dnd.user_data=t,p.vakata.dnd.is_down=!0,p.vakata.dnd.helper=p("<div id='vakata-dragged' />").html(a),p(document).bind("mousemove",p.vakata.dnd.drag),p(document).bind("mouseup",p.vakata.dnd.drag_stop),!1},drag:function(e){if(p.vakata.dnd.is_down){if(!p.vakata.dnd.is_drag){if(!(5<Math.abs(e.pageX-p.vakata.dnd.init_x)||5<Math.abs(e.pageY-p.vakata.dnd.init_y)))return;p.vakata.dnd.helper.appendTo("body"),p.vakata.dnd.is_drag=!0,p(document).triggerHandler("drag_start.vakata",{event:e,data:p.vakata.dnd.user_data})}if("mousemove"===e.type){var t=p(document),a=t.scrollTop(),s=t.scrollLeft();e.pageY-a<20?(x&&"down"===k&&(clearInterval(x),x=!1),x||(k="up",x=setInterval(function(){p(document).scrollTop(p(document).scrollTop()-p.vakata.dnd.scroll_spd)},150))):x&&"up"===k&&(clearInterval(x),x=!1),p(window).height()-(e.pageY-a)<20?(x&&"up"===k&&(clearInterval(x),x=!1),x||(k="down",x=setInterval(function(){p(document).scrollTop(p(document).scrollTop()+p.vakata.dnd.scroll_spd)},150))):x&&"down"===k&&(clearInterval(x),x=!1),e.pageX-s<20?(v&&"right"===b&&(clearInterval(v),v=!1),v||(b="left",v=setInterval(function(){p(document).scrollLeft(p(document).scrollLeft()-p.vakata.dnd.scroll_spd)},150))):v&&"left"===b&&(clearInterval(v),v=!1),p(window).width()-(e.pageX-s)<20?(v&&"left"===b&&(clearInterval(v),v=!1),v||(b="right",v=setInterval(function(){p(document).scrollLeft(p(document).scrollLeft()+p.vakata.dnd.scroll_spd)},150))):v&&"right"===b&&(clearInterval(v),v=!1)}p.vakata.dnd.helper.css({left:e.pageX+p.vakata.dnd.helper_left+"px",top:e.pageY+p.vakata.dnd.helper_top+"px"}),p(document).triggerHandler("drag.vakata",{event:e,data:p.vakata.dnd.user_data})}},drag_stop:function(e){v&&clearInterval(v),x&&clearInterval(x),p(document).unbind("mousemove",p.vakata.dnd.drag),p(document).unbind("mouseup",p.vakata.dnd.drag_stop),p(document).triggerHandler("drag_stop.vakata",{event:e,data:p.vakata.dnd.user_data}),p.vakata.dnd.helper.remove(),p.vakata.dnd.init_x=0,p.vakata.dnd.init_y=0,p.vakata.dnd.user_data={},p.vakata.dnd.is_down=!1,p.vakata.dnd.is_drag=!1}},p(function(){p.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",title:"vakata"})}),p.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1},this.get_container().bind("mouseenter.jstree",p.proxy(function(e){if(p.vakata.dnd.is_drag&&p.vakata.dnd.user_data.jstree&&(this.data.themes&&(m.attr("class","jstree-"+this.data.themes.theme),j&&j.attr("class","jstree-"+this.data.themes.theme),p.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),e.currentTarget===e.target&&p.vakata.dnd.user_data.obj&&p(p.vakata.dnd.user_data.obj).length&&p(p.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target)){var t,a=p.jstree._reference(e.target);a.data.dnd.foreign?!0!==(t=a._get_settings().dnd.drag_check.call(this,{o:g,r:a.get_container(),is_root:!0}))&&!0!==t.inside&&!0!==t.before&&!0!==t.after||p.vakata.dnd.helper.children("ins").attr("class","jstree-ok"):(a.prepare_move(g,a.get_container(),"last"),a.check_move()&&p.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))}},this)).bind("mouseup.jstree",p.proxy(function(e){if(p.vakata.dnd.is_drag&&p.vakata.dnd.user_data.jstree&&e.currentTarget===e.target&&p.vakata.dnd.user_data.obj&&p(p.vakata.dnd.user_data.obj).length&&p(p.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==e.target){var t,a=p.jstree._reference(e.currentTarget);a.data.dnd.foreign?!0!==(t=a._get_settings().dnd.drag_check.call(this,{o:g,r:a.get_container(),is_root:!0}))&&!0!==t.inside&&!0!==t.before&&!0!==t.after||a._get_settings().dnd.drag_finish.call(this,{o:g,r:a.get_container(),is_root:!0}):a.move_node(g,a.get_container(),"last",e[a._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",p.proxy(function(e){if(e.relatedTarget&&e.relatedTarget.id&&"jstree-marker-line"===e.relatedTarget.id)return!1;p.vakata.dnd.is_drag&&p.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),p.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&p.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",p.proxy(function(e){if(p.vakata.dnd.is_drag&&p.vakata.dnd.user_data.jstree){var t=this.get_container()[0];e.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(p.proxy(function(){this.scrollLeft+=p.vakata.dnd.scroll_spd},t),100)):e.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(p.proxy(function(){this.scrollLeft-=p.vakata.dnd.scroll_spd},t),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1),e.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(p.proxy(function(){this.scrollTop+=p.vakata.dnd.scroll_spd},t),100)):e.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(p.proxy(function(){this.scrollTop-=p.vakata.dnd.scroll_spd},t),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",p.proxy(function(e){p.vakata.dnd.is_drag&&p.vakata.dnd.user_data.jstree&&m&&j&&(m.hide(),j.hide())},this)).delegate("a","mousedown.jstree",p.proxy(function(e){if(1===e.which)return this.start_drag(e.currentTarget,e),!1},this)).delegate("a","mouseenter.jstree",p.proxy(function(e){p.vakata.dnd.is_drag&&p.vakata.dnd.user_data.jstree&&this.dnd_enter(e.currentTarget)},this)).delegate("a","mousemove.jstree",p.proxy(function(e){p.vakata.dnd.is_drag&&p.vakata.dnd.user_data.jstree&&(f&&f.length&&f.children("a")[0]===e.currentTarget||this.dnd_enter(e.currentTarget),void 0===this.data.dnd.off.top&&(this.data.dnd.off=p(e.target).offset()),this.data.dnd.w=(e.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,this.data.dnd.w<0&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",p.proxy(function(e){if(p.vakata.dnd.is_drag&&p.vakata.dnd.user_data.jstree){if(e.relatedTarget&&e.relatedTarget.id&&"jstree-marker-line"===e.relatedTarget.id)return!1;m&&m.hide(),j&&j.hide(),this.data.dnd.mto=setTimeout((t=this,function(){t.dnd_leave(e)}),0)}var t},this)).delegate("a","mouseup.jstree",p.proxy(function(e){p.vakata.dnd.is_drag&&p.vakata.dnd.user_data.jstree&&this.dnd_finish(e)},this)),p(document).bind("drag_stop.vakata",p.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,this.data.dnd.off=!1,this.data.dnd.prepared=!1,this.data.dnd.w=!1,this.data.dnd.to1=!1,this.data.dnd.to2=!1,this.data.dnd.i1=!1,this.data.dnd.i2=!1,this.data.dnd.active=!1,this.data.dnd.foreign=!1,m&&m.css({top:"-2000px"}),j&&j.css({top:"-2000px"})},this)).bind("drag_start.vakata",p.proxy(function(e,t){if(t.data.jstree){var a=p(t.event.target);a.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(a)}},this));var e=this._get_settings().dnd;e.drag_target&&p(document).delegate(e.drag_target,"mousedown.jstree-"+this.get_index(),p.proxy(function(e){g=e.target,p.vakata.dnd.drag_start(e,{jstree:!0,obj:e.target},"<ins class='jstree-icon'></ins>"+p(e.target).text()),this.data.themes&&(m&&m.attr("class","jstree-"+this.data.themes.theme),j&&j.attr("class","jstree-"+this.data.themes.theme),p.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),p.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var t=this.get_container();this.data.dnd.cof=t.offset(),this.data.dnd.cw=parseInt(t.width(),10),this.data.dnd.ch=parseInt(t.height(),10),this.data.dnd.foreign=!0,e.preventDefault()},this)),e.drop_target&&p(document).delegate(e.drop_target,"mouseenter.jstree-"+this.get_index(),p.proxy(function(e){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:g,r:p(e.target),e:e})&&p.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(e.drop_target,"mouseleave.jstree-"+this.get_index(),p.proxy(function(e){this.data.dnd.active&&p.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(e.drop_target,"mouseup.jstree-"+this.get_index(),p.proxy(function(e){this.data.dnd.active&&p.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:g,r:p(e.target),e:e})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(e){return!0},drop_finish:p.noop,drag_target:".jstree-draggable",drag_finish:p.noop,drag_check:function(e){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(f&&f.length){if(this.data.dnd.off=f.offset(),this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+f.width()),this.data.dnd.foreign){var e=this._get_settings().dnd.drag_check.call(this,{o:g,r:f});return this.data.dnd.after=e.after,this.data.dnd.before=e.before,this.data.dnd.inside=e.inside,this.data.dnd.prepared=!0,this.dnd_show()}return this.prepare_move(g,f,"before"),this.data.dnd.before=this.check_move(),this.prepare_move(g,f,"after"),this.data.dnd.after=this.check_move(),this._is_loaded(f)?(this.prepare_move(g,f,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1,this.data.dnd.prepared=!0,this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var e,t=["before","inside","after"],a=!1,s=this._get_settings().core.rtl;switch(t=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"],p.each(t,p.proxy(function(e,t){if(this.data.dnd[t])return p.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),a=t,!1},this)),!1===a&&p.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),e=s?this.data.dnd.off.right-18:this.data.dnd.off.left+10,a){case"before":m.css({left:e+"px",top:this.data.dnd.off.top-6+"px"}).show(),j&&j.css({left:e+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case"after":m.css({left:e+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show(),j&&j.css({left:e+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case"inside":m.css({left:e+(s?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show(),j&&j.hide();break;default:m.hide(),j&&j.hide()}return y=a}},dnd_open:function(){this.data.dnd.to2=!1,this.open_node(f,p.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(e){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:g,r:f,p:y}):(this.dnd_prepare(),this.move_node(g,f,y,e[this._get_settings().dnd.copy_modifier+"Key"])),f=g=!1,m.hide(),j&&j.hide()},dnd_enter:function(e){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var t=this._get_settings().dnd;this.data.dnd.prepared=!1,f=this._get_node(e),t.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(p.proxy(this.dnd_prepare,this),t.check_timeout)):this.dnd_prepare(),t.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),f&&f.length&&f.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(p.proxy(this.dnd_open,this),t.open_timeout))):f&&f.length&&f.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(e){this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,p.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),m.hide(),j&&j.hide(),f&&f[0]===e.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(e,t){g=this._get_node(e),this.data.ui&&this.is_selected(g)&&(g=this._get_node(null,!0));var a=1<g.length?this._get_string("multiple_selection"):this.get_text(g),s=this.get_container();this._get_settings().core.html_titles||(a=a.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")),p.vakata.dnd.drag_start(t,{jstree:!0,obj:g},"<ins class='jstree-icon'></ins>"+a),this.data.themes&&(m&&m.attr("class","jstree-"+this.data.themes.theme),j&&j.attr("class","jstree-"+this.data.themes.theme),p.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),this.data.dnd.cof=s.offset(),this.data.dnd.cw=parseInt(s.width(),10),this.data.dnd.ch=parseInt(s.height(),10),this.data.dnd.active=!0}}}),p(function(){p.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",title:"jstree"}),m=p("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(e){return m.hide(),j.hide(),e.preventDefault(),e.stopImmediatePropagation(),!1}).appendTo("body"),j=p("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(e){if(f&&f.length)return f.children("a").trigger(e),e.preventDefault(),e.stopImmediatePropagation(),!1}).bind("mouseleave",function(e){var t=p(e.relatedTarget);if((t.is(".jstree")||0===t.closest(".jstree").length)&&f&&f.length)return f.children("a").trigger(e),m.hide(),j.hide(),e.preventDefault(),e.stopImmediatePropagation(),!1}).appendTo("body"),p(document).bind("drag_start.vakata",function(e,t){t.data.jstree&&(m.show(),j&&j.show())}),p(document).bind("drag_stop.vakata",function(e,t){t.data.jstree&&(m.hide(),j&&j.hide())})}),(w=jQuery).jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui,this.data.ui&&this.data.checkbox.noui&&(this.select_node=this.deselect_node=this.deselect_all=w.noop,this.get_selected=this.get_checked),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",w.proxy(function(e,t){this._prepare_checkboxes(t.rslt.obj)},this)).bind("loaded.jstree",w.proxy(function(e){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",w.proxy(function(e){if(e.preventDefault(),this._get_node(e.target).hasClass("jstree-checked")?this.uncheck_node(e.target):this.check_node(e.target),!this.data.ui||!this.data.checkbox.noui)return e.stopImmediatePropagation(),!1;this.save_selected(),this.data.cookies&&this.save_cookie("select_node")},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(e){return["check_"+(e[0].id||Math.ceil(1e4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(e,t){t.checked&&this.check_node(e,!1)},_prepare_checkboxes:function(e){if(!1!==(e=e&&-1!=e?this._get_node(e):this.get_container().find("> ul > li"))){var a,t,s=this,i=this._get_settings().checkbox.two_state,n=this._get_settings().checkbox.real_checkboxes,r=this._get_settings().checkbox.real_checkboxes_names;e.each(function(){t=w(this),a=t.is("li")&&(t.hasClass("jstree-checked")||n&&t.children(":checked").length)?"jstree-checked":"jstree-unchecked",t.find("li").addBack().each(function(){var e,t=w(this);t.children("a"+(s.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(i?"jstree-unchecked":a),n&&(t.children(":checkbox").length?t.children(":checkbox").addClass("jstree-real-checkbox"):(e=r.call(s,t),t.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+e[0]+"' name='"+e[0]+"' value='"+e[1]+"' />"))),i?(t.hasClass("jstree-checked")||t.children(":checked").length)&&t.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"==a||t.hasClass("jstree-checked")||t.children(":checked").length)&&t.find("li").addBack().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})}),i||e.find(".jstree-checked").parent().parent().each(function(){s._repair_state(this)})}},change_state:function(e,t){e=this._get_node(e);var a=!1,s=this._get_settings().checkbox.real_checkboxes;if(!e||-1===e)return!1;if(t=!1===t||!0===t?t:e.hasClass("jstree-checked"),this._get_settings().checkbox.two_state)t?(e.removeClass("jstree-checked").addClass("jstree-unchecked"),s&&e.children(":checkbox").prop("checked",!1)):(e.removeClass("jstree-unchecked").addClass("jstree-checked"),s&&e.children(":checkbox").prop("checked",!0));else{if(t){if(!(a=e.find("li").addBack()).filter(".jstree-checked, .jstree-undetermined").length)return!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),s&&a.children(":checkbox").prop("checked",!1)}else{if(!(a=e.find("li").addBack()).filter(".jstree-unchecked, .jstree-undetermined").length)return!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),s&&a.children(":checkbox").prop("checked",!0),this.data.ui&&(this.data.ui.last_selected=e),this.data.checkbox.last_selected=e}e.parentsUntil(".jstree","li").each(function(){var e=w(this);if(t){if(e.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return e.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),s&&e.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;e.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),s&&e.children(":checkbox").prop("checked",!1)}else{if(e.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return e.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),s&&e.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1),!1;e.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),s&&e.children(":checkbox").prop("checked",!0)}})}return this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked()),this.__callback(e),!0},check_node:function(e){if(this.change_state(e,!1)){if(e=this._get_node(e),this._get_settings().checkbox.checked_parent_open){var t=this;e.parents(".jstree-closed").each(function(){t.open_node(this,!1,!0)})}this.__callback({obj:e})}},uncheck_node:function(e){this.change_state(e,!0)&&this.__callback({obj:this._get_node(e)})},check_all:function(){var e=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){e.change_state(this,!1)}),this.__callback()},uncheck_all:function(){var e=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){e.change_state(this,!0)}),this.__callback()},is_checked:function(e){return!!(e=this._get_node(e)).length&&e.is(".jstree-checked")},get_checked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-checked"):e.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-unchecked"):e.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(e){if((e=this._get_node(e)).length)if(this._get_settings().checkbox.two_state)e.find("li").addBack().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var t=this._get_settings().checkbox.real_checkboxes,a=e.find("> ul > .jstree-checked").length,s=e.find("> ul > .jstree-undetermined").length,i=e.find("> ul > li").length;0===i?e.hasClass("jstree-undetermined")&&this.change_state(e,!1):0===a&&0===s?this.change_state(e,!0):a===i?this.change_state(e,!1):(e.parentsUntil(".jstree","li").addBack().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),t&&e.parentsUntil(".jstree","li").addBack().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var a=this,e=this.data.ui.to_select;e=w.map(w.makeArray(e),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.deselect_all(),w.each(e,function(e,t){a.check_node(t)}),this.__callback()}else this.__call_old()},save_loaded:function(){var e=this;this.data.core.to_load=[],this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&e.data.core.to_load.push("#"+this.id)})}}}),w(function(){w.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})}),function(_){_.vakata.xslt=function(e,t,a){var s,i,n,r=!1;if(!1===r&&window.ActiveXObject)try{r=new ActiveXObject("Msxml2.XSLTemplate"),(i=new ActiveXObject("Msxml2.DOMDocument")).loadXML(e),(n=new ActiveXObject("Msxml2.FreeThreadedDOMDocument")).loadXML(t),r.stylesheet=n,(s=r.createProcessor()).input=i,s.transform(),r=s.output}catch(e){}e=_.parseXML(e),t=_.parseXML(t),!1===r&&"undefined"!=typeof XSLTProcessor&&((s=new XSLTProcessor).importStylesheet(t),r=s.transformToFragment(e,document),r=_("<div />").append(r).html()),!1===r&&void 0!==e.transformNode&&(r=e.transformNode(t)),a.call(null,r)};var s={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},u=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};_.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(e,t,a){var s=this;this.load_node_xml(e,function(){s.__callback({obj:s._get_node(e)}),t.call(this)},a)},_is_loaded:function(e){var t=this._get_settings().xml_data;return-1==(e=this._get_node(e))||!e||!t.ajax&&!_.isFunction(t.data)||e.is(".jstree-open, .jstree-leaf")||0<e.children("ul").children("li").size()},load_node_xml:function(i,n,r){var o=this.get_settings().xml_data,l=function(){},e=function(){};if((i=this._get_node(i))&&-1!==i){if(i.data("jstree_is_loading"))return;i.data("jstree_is_loading",!0)}switch(!0){case!o.data&&!o.ajax:throw"Neither data nor ajax settings supplied.";case _.isFunction(o.data):o.data.call(this,i,_.proxy(function(e){this.parse_xml(e,_.proxy(function(e){e&&(10<(e=e.replace(/ ?xmlns="[^"]*"/gi,"")).length?(e=_(e),-1!==i&&i?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.append(e),i.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),o.clean_node&&this.clean_node(i),n&&n.call(this)):i&&-1!==i?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(i),n&&n.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this)))},this))},this));break;case!!o.data&&!o.ajax||!!o.data&&!!o.ajax&&(!i||-1===i):i&&-1!=i||this.parse_xml(o.data,_.proxy(function(e){e?10<(e=e.replace(/ ?xmlns="[^"]*"/gi,"")).length&&(e=_(e),this.get_container().children("ul").empty().append(e.children()),o.clean_node&&this.clean_node(i),n&&n.call(this)):o.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this))},this));break;case!o.data&&!!o.ajax||!!o.data&&!!o.ajax&&i&&-1!==i:l=function(e,t,a){var s=this.get_settings().xml_data.ajax.error;s&&s.call(this,e,t,a),-1!==i&&i.length?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.removeData("jstree_is_loading"),"success"===t&&o.correct_state&&this.correct_state(i)):"success"===t&&o.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this)},e=function(e,t,a){e=a.responseText;var s=this.get_settings().xml_data.ajax.success;if(s&&(e=s.call(this,e,t,a)||e),""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,""))return l.call(this,a,t,"");this.parse_xml(e,_.proxy(function(e){e&&(10<(e=e.replace(/ ?xmlns="[^"]*"/gi,"")).length?(e=_(e),-1!==i&&i?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.append(e),i.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),o.clean_node&&this.clean_node(i),n&&n.call(this)):i&&-1!==i?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(i),n&&n.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this)))},this))},o.ajax.context=this,o.ajax.error=l,o.ajax.success=e,o.ajax.dataType||(o.ajax.dataType="xml"),_.isFunction(o.ajax.url)&&(o.ajax.url=o.ajax.url.call(this,i)),_.isFunction(o.ajax.data)&&(o.ajax.data=o.ajax.data.call(this,i)),_.ajax(o.ajax)}},parse_xml:function(e,t){var a=this._get_settings().xml_data;_.vakata.xslt(e,s[a.xsl],t)},get_xml:function(e,t,a,s,i){var n,r,o,l,d="",c=this._get_settings(),h=this;return e||(e="flat"),i||(i=0),(t=this._get_node(t))&&-1!==t||(t=this.get_container().find("> ul > li")),a=_.isArray(a)?a:["id","class"],!i&&this.data.types&&-1===_.inArray(c.types.type_attr,a)&&a.push(c.types.type_attr),s=_.isArray(s)?s:[],i||(c.xml_data.get_include_preamble&&(d+='<?xml version="1.0" encoding="UTF-8"?>'),d+="<root>"),t.each(function(){d+="<item",o=_(this),_.each(a,function(e,t){var a=o.attr(t);c.xml_data.get_skip_empty&&void 0===a||(d+=" "+t+'="'+u((" "+(a||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),o.hasClass("jstree-open")&&(d+=' state="open"'),o.hasClass("jstree-closed")&&(d+=' state="closed"'),"flat"===e&&(d+=' parent_id="'+u(i)+'"'),d+=">",d+="<content>",o.children("a").each(function(){n=_(this),l=!1,d+="<name",-1!==_.inArray("languages",c.plugins)&&_.each(c.languages,function(e,t){if(n.hasClass(t))return d+=' lang="'+u(t)+'"',l=t,!1}),s.length&&_.each(s,function(e,t){var a=n.attr(t);c.xml_data.get_skip_empty&&void 0===a||(d+=" "+t+'="'+u((" "+a||!1).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),n.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(d+=' icon="'+u(n.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"'),n.children("ins").get(0).style.backgroundImage.length&&(d+=' icon="'+u(n.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/gi,"").replace(/"/gi,""))+'"'),d+=">",d+="<![CDATA["+h.get_text(n,l)+"]]>",d+="</name>"}),d+="</content>",r=o[0].id||!0,o=o.find("> ul > li"),r=o.length?h.get_xml(e,o,a,s,r):"","nest"==e&&(d+=r),d+="</item>","flat"==e&&(d+=r)}),i||(d+="</root>"),d}}})}(jQuery),8<=(C=jQuery)().jquery.split(".")[1]?(C.expr[":"].jstree_contains=C.expr.createPseudo(function(t){return function(e){return 0<=(e.textContent||e.innerText||"").toLowerCase().indexOf(t.toLowerCase())}}),C.expr[":"].jstree_title_contains=C.expr.createPseudo(function(t){return function(e){return 0<=(e.getAttribute("title")||"").toLowerCase().indexOf(t.toLowerCase())}})):(C.expr[":"].jstree_contains=function(e,t,a){return 0<=(e.textContent||e.innerText||"").toLowerCase().indexOf(a[3].toLowerCase())},C.expr[":"].jstree_title_contains=function(e,t,a){return 0<=(e.getAttribute("title")||"").toLowerCase().indexOf(a[3].toLowerCase())}),C.jstree.plugin("search",{__init:function(){this.data.search.str="",this.data.search.result=C(),this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(e,t){C(this).children("ul").find("li").hide().removeClass("jstree-last"),t.rslt.nodes.parentsUntil(".jstree").addBack().show().filter("ul").each(function(){C(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){C(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(e,t){if(""!==C.trim(e)){var a=this.get_settings().search,s=this,i=function(){},n=function(){};if(this.data.search.str=e,!t&&!1!==a.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length)return this.search.supress_callback=!0,i=function(){},n=function(e,t,a){var s=this.get_settings().search.ajax.success;s&&(e=s.call(this,e,t,a)||e),this.data.search.to_open=e,this._search_open()},a.ajax.context=this,a.ajax.error=i,a.ajax.success=n,C.isFunction(a.ajax.url)&&(a.ajax.url=a.ajax.url.call(this,e)),C.isFunction(a.ajax.data)&&(a.ajax.data=a.ajax.data.call(this,e)),a.ajax.data||(a.ajax.data={search_string:e}),a.ajax.dataType&&!/^json/.exec(a.ajax.dataType)||(a.ajax.dataType="json"),void C.ajax(a.ajax);this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+a.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){s.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:e})}else this.clear_search()},clear_search:function(e){this.data.search.result.removeClass("jstree-search"),this.__callback(this.data.search.result),this.data.search.result=C()},_search_open:function(e){var a=this,t=!0,s=[],i=[];this.data.search.to_open.length&&(C.each(this.data.search.to_open,function(e,t){if("#"==t)return!0;C(t).length&&C(t).is(".jstree-closed")?s.push(t):i.push(t)}),s.length&&(this.data.search.to_open=i,C.each(s,function(e,t){a.open_node(t,function(){a._search_open(!0)})}),t=!1)),t&&this.search(this.data.search.str,!0)}}}),(T=jQuery).vakata.context={hide_on_mouseleave:!1,cnt:T("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(e,t,a,s,i,n,r){T.vakata.context.rtl=!!r;var o,l,d=T.vakata.context.parse(e);d&&(T.vakata.context.vis=!0,T.vakata.context.tgt=t,T.vakata.context.par=n||t||null,T.vakata.context.data=i||null,T.vakata.context.cnt.html(d).css({visibility:"hidden",display:"block",left:0,top:0}),T.vakata.context.hide_on_mouseleave&&T.vakata.context.cnt.one("mouseleave",function(e){T.vakata.context.hide()}),o=T.vakata.context.cnt.height(),a+(l=T.vakata.context.cnt.width())>T(document).width()&&(a=T(document).width()-(l+5),T.vakata.context.cnt.find("li > ul").addClass("right")),s+o>T(document).height()&&(s-=o+t[0].offsetHeight,T.vakata.context.cnt.find("li > ul").addClass("bottom")),T.vakata.context.cnt.css({left:a,top:s}).find("li:has(ul)").bind("mouseenter",function(e){var t=T(document).width(),a=T(document).height(),s=T(this).children("ul").show();t!==T(document).width()&&s.toggleClass("right"),a!==T(document).height()&&s.toggleClass("bottom")}).bind("mouseleave",function(e){T(this).children("ul").hide()}).end().css({visibility:"visible"}).show(),T(document).triggerHandler("context_show.vakata"))},hide:function(){T.vakata.context.vis=!1,T.vakata.context.cnt.attr("class","").css({visibility:"hidden"}),T(document).triggerHandler("context_hide.vakata")},parse:function(e,t){if(!e)return!1;var a="",s=!1,i=!0;return t||(T.vakata.context.func={}),a+="<ul>",T.each(e,function(e,t){if(!t)return!0;T.vakata.context.func[e]=t.action,!i&&t.separator_before&&(a+="<li class='vakata-separator vakata-separator-before'></li>"),i=!1,a+="<li class='"+(t._class||"")+(t._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ",t.icon&&-1===t.icon.indexOf("/")&&(a+=" class='"+t.icon+"' "),t.icon&&-1!==t.icon.indexOf("/")&&(a+=" style='background:url("+t.icon+") center center no-repeat;' "),a+=">&#160;</ins><a href='#' rel='"+e+"'>",t.submenu&&(a+="<span style='float:"+(T.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"),a+=t.label+"</a>",t.submenu&&(s=T.vakata.context.parse(t.submenu,!0))&&(a+=s),a+="</li>",t.separator_after&&(a+="<li class='vakata-separator vakata-separator-after'></li>",i=!0)}),a=a.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,""),a+="</ul>",T(document).triggerHandler("context_parse.vakata"),10<a.length&&a},exec:function(e){return!!T.isFunction(T.vakata.context.func[e])&&(T.vakata.context.func[e].call(T.vakata.context.data,T.vakata.context.par),!0)}},T(function(){T.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",title:"vakata"}),T.vakata.context.cnt.delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(e){!T(this).parent().hasClass("jstree-contextmenu-disabled")&&T.vakata.context.exec(T(this).attr("rel"))?T.vakata.context.hide():T(this).blur()}).delegate("a","mouseover",function(){T.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body"),T(document).bind("mousedown",function(e){T.vakata.context.vis&&!T.contains(T.vakata.context.cnt[0],e.target)&&T.vakata.context.hide()}),void 0!==T.hotkeys&&T(document).bind("keydown","up",function(e){if(T.vakata.context.vis){var t=T.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();t.length||(t=T.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()),t.addClass("vakata-hover"),e.stopImmediatePropagation(),e.preventDefault()}}).bind("keydown","down",function(e){if(T.vakata.context.vis){var t=T.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();t.length||(t=T.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()),t.addClass("vakata-hover"),e.stopImmediatePropagation(),e.preventDefault()}}).bind("keydown","right",function(e){T.vakata.context.vis&&(T.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),e.stopImmediatePropagation(),e.preventDefault())}).bind("keydown","left",function(e){T.vakata.context.vis&&(T.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),e.stopImmediatePropagation(),e.preventDefault())}).bind("keydown","esc",function(e){T.vakata.context.hide(),e.preventDefault()}).bind("keydown","space",function(e){T.vakata.context.cnt.find(".vakata-hover").last().children("a").click(),e.preventDefault()})}),T.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",T.proxy(function(e){e.preventDefault(),T(e.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(e.currentTarget,e.pageX,e.pageY)},this)).delegate("a","click.jstree",T.proxy(function(e){this.data.contextmenu&&T.vakata.context.hide()},this)).bind("destroy.jstree",T.proxy(function(){this.data.contextmenu&&T.vakata.context.hide()},this)),T(document).bind("context_hide.vakata",T.proxy(function(){this.data.contextmenu=!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(e){this.create(e)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(e){this.rename(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(e){this.is_selected(e)?this.remove():this.remove(e)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){this.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){this.copy(e)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(e){this.paste(e)}}}}}},_fn:{show_contextmenu:function(e,t,a){e=this._get_node(e);var s=this.get_settings().contextmenu,i=e.children("a:visible:eq(0)"),n=!1,r=!1;s.select_node&&this.data.ui&&!this.is_selected(e)&&(this.deselect_all(),this.select_node(e,!0)),(s.show_at_node||void 0===t||void 0===a)&&(t=(n=i.offset()).left,a=n.top+this.data.core.li_height),r=e.data("jstree")&&e.data("jstree").contextmenu?e.data("jstree").contextmenu:s.items,T.isFunction(r)&&(r=r.call(this,e)),this.data.contextmenu=!0,T.vakata.context.show(r,i,t,a,this,e,this._get_settings().core.rtl),this.data.themes&&T.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}}),(A=jQuery).jstree.plugin("types",{__init:function(){var t=this._get_settings().types;this.data.types.attach_to=[],this.get_container().bind("init.jstree",A.proxy(function(){var e=t.types,a=t.type_attr,s="",i=this;A.each(e,function(e,t){if(A.each(t,function(e,t){/^(max_depth|max_children|icon|valid_children)$/.test(e)||i.data.types.attach_to.push(e)}),!t.icon)return!0;(t.icon.image||t.icon.position)&&(s+="default"==e?".jstree-"+i.get_index()+" a > .jstree-icon { ":".jstree-"+i.get_index()+" li["+a+'="'+e+'"] > a > .jstree-icon { ',t.icon.image&&(s+=" background-image:url("+t.icon.image+"); "),t.icon.position?s+=" background-position:"+t.icon.position+"; ":s+=" background-position:0 0; ",s+="} ")}),""!==s&&A.vakata.css.add_sheet({str:s,title:"jstree-types"})},this)).bind("before.jstree",A.proxy(function(e,t){var a,s,i=!!this._get_settings().types.use_data&&this._get_node(t.args[0]),n=!(!i||-1===i||!i.length)&&i.data("jstree");if(n&&n.types&&!1===n.types[t.func])return e.stopImmediatePropagation(),!1;if(-1!==A.inArray(t.func,this.data.types.attach_to)){if(!t.args[0]||!t.args[0].tagName&&!t.args[0].jquery)return;if(((a=this._get_settings().types.types)[s=this._get_type(t.args[0])]&&void 0!==a[s][t.func]||a.default&&void 0!==a.default[t.func])&&!1===this._check(t.func,t.args[0]))return e.stopImmediatePropagation(),!1}},this)),O&&this.get_container().bind("load_node.jstree set_type.jstree",A.proxy(function(e,t){var a=t&&t.rslt&&t.rslt.obj&&-1!==t.rslt.obj?this._get_node(t.rslt.obj).parent():this.get_container_ul(),s=!1,i=this._get_settings().types;A.each(i.types,function(e,t){t.icon&&(t.icon.image||t.icon.position)&&(s="default"===e?a.find("li > a > .jstree-icon"):a.find("li["+i.type_attr+"='"+e+"'] > a > .jstree-icon"),t.icon.image&&s.css("backgroundImage","url("+t.icon.image+")"),s.css("backgroundPosition",t.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{default:{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(e,t){t.type&&this._get_settings().types.use_data&&this.set_type(t.type,e)},_get_type:function(e){return!(!(e=this._get_node(e))||!e.length)&&(e.attr(this._get_settings().types.type_attr)||"default")},set_type:function(e,t){var a=!(!(t=this._get_node(t)).length||!e)&&t.attr(this._get_settings().types.type_attr,e);return a&&this.__callback({obj:t,type:e}),a},_check:function(t,e,a){e=this._get_node(e);var s=!1,i=this._get_type(e),n=0,r=this,o=this._get_settings().types,l=!1;if(-1===e){if(!o[t])return;s=o[t]}else{if(!1===i)return;(l=!!o.use_data&&e.data("jstree"))&&l.types&&void 0!==l.types[t]?s=l.types[t]:o.types[i]&&void 0!==o.types[i][t]?s=o.types[i][t]:o.types.default&&void 0!==o.types.default[t]&&(s=o.types.default[t])}return A.isFunction(s)&&(s=s.call(this,e)),"max_depth"===t&&-1!==e&&!1!==a&&-2!==o.max_depth&&0!==s&&e.children("a:eq(0)").parentsUntil(".jstree","li").each(function(e){return-1!==o.max_depth&&o.max_depth-(e+1)<=0?(s=0,!1):-1!==(n=0===e?s:r._check(t,this,!1))&&n-(e+1)<=0?(s=0,!1):(0<=n&&(n-(e+1)<s||s<0)&&(s=n-(e+1)),void(0<=o.max_depth&&(o.max_depth-(e+1)<s||s<0)&&(s=o.max_depth-(e+1))))}),s},check_move:function(){if(!this.__call_old())return!1;var e,t=this._get_move(),a=t.rt._get_settings().types,s=t.rt._check("max_children",t.cr),i=t.rt._check("max_depth",t.cr),n=t.rt._check("valid_children",t.cr),r=1;if("none"===n)return!1;if(A.isArray(n)&&t.ot&&t.ot._get_type&&(t.o.each(function(){if(-1===A.inArray(t.ot._get_type(this),n))return r=!1}),!1===r))return!1;if(-2!==a.max_children&&-1!==s&&(-1===t.cr?this.get_container().find("> ul > li").not(t.o).length:t.cr.find("> ul > li").not(t.o).length)+t.o.length>s)return!1;if(-2!==a.max_depth&&-1!==i){if((r=0)===i)return!1;if(void 0===t.o.d){for(e=t.o;0<e.length;)e=e.find("> ul > li"),r++;t.o.d=r}if(i-t.o.d<0)return!1}return!0},create_node:function(e,t,a,s,i,n){if(!n&&(i||this._is_loaded(e))){var r="string"==typeof t&&t.match(/^before|after$/i)&&-1!==e?this._get_parent(e):this._get_node(e),o=this._get_settings().types,l=this._check("max_children",r),d=this._check("max_depth",r),c=this._check("valid_children",r);if("string"==typeof a&&(a={data:a}),a||(a={}),"none"===c)return!1;if(A.isArray(c))if(a.attr&&a.attr[o.type_attr]){if(-1===A.inArray(a.attr[o.type_attr],c))return!1}else a.attr||(a.attr={}),a.attr[o.type_attr]=c[0];if(-2!==o.max_children&&-1!==l&&l<(-1===r?this.get_container().find("> ul > li").length:r.find("> ul > li").length)+1)return!1;if(-2!==o.max_depth&&-1!==d&&d-1<0)return!1}return this.__call_old(!0,e,t,a,s,i,n)}}}),(I=jQuery).jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.html_data.original_container_html.find("li").addBack().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(e,t,a){var s=this;this.load_node_html(e,function(){s.__callback({obj:s._get_node(e)}),t.call(this)},a)},_is_loaded:function(e){return-1==(e=this._get_node(e))||!e||!this._get_settings().html_data.ajax&&!I.isFunction(this._get_settings().html_data.data)||e.is(".jstree-open, .jstree-leaf")||0<e.children("ul").children("li").size()},load_node_html:function(i,n,r){var e,o=this.get_settings().html_data,l=function(){},t=function(){};if((i=this._get_node(i))&&-1!==i){if(i.data("jstree_is_loading"))return;i.data("jstree_is_loading",!0)}switch(!0){case I.isFunction(o.data):o.data.call(this,i,I.proxy(function(e){e&&""!==e&&e.toString&&""!==e.toString().replace(/^[\s\n]+$/,"")?((e=I(e)).is("ul")||(e=I("<ul />").append(e)),-1!=i&&i?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),i.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(i),n&&n.call(this)):i&&-1!==i?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(i),n&&n.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this))},this));break;case!o.data&&!o.ajax:i&&-1!=i||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),n&&n.call(this);break;case!!o.data&&!o.ajax||!!o.data&&!!o.ajax&&(!i||-1===i):i&&-1!=i||((e=I(o.data)).is("ul")||(e=I("<ul />").append(e)),this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),n&&n.call(this);break;case!o.data&&!!o.ajax||!!o.data&&!!o.ajax&&i&&-1!==i:i=this._get_node(i),l=function(e,t,a){var s=this.get_settings().html_data.ajax.error;s&&s.call(this,e,t,a),-1!=i&&i.length?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.removeData("jstree_is_loading"),"success"===t&&o.correct_state&&this.correct_state(i)):"success"===t&&o.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this)},t=function(e,t,a){var s=this.get_settings().html_data.ajax.success;if(s&&(e=s.call(this,e,t,a)||e),""===e||e&&e.toString&&""===e.toString().replace(/^[\s\n]+$/,""))return l.call(this,a,t,"");e?((e=I(e)).is("ul")||(e=I("<ul />").append(e)),-1!=i&&i?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.append(e).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),i.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(i),n&&n.call(this)):i&&-1!==i?(i.children("a.jstree-loading").removeClass("jstree-loading"),i.removeData("jstree_is_loading"),o.correct_state&&(this.correct_state(i),n&&n.call(this))):o.correct_state&&(this.get_container().children("ul").empty(),n&&n.call(this))},o.ajax.context=this,o.ajax.error=l,o.ajax.success=t,o.ajax.dataType||(o.ajax.dataType="html"),I.isFunction(o.ajax.url)&&(o.ajax.url=o.ajax.url.call(this,i)),I.isFunction(o.ajax.data)&&(o.ajax.data=o.ajax.data.call(this,i)),I.ajax(o.ajax)}}}}),I.jstree.defaults.plugins.push("html_data"),(S=jQuery).jstree.plugin("themeroller",{__init:function(){var a=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(e){S(e.currentTarget).hasClass("jstree-loading")||S(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){S(this).removeClass(a.item_h)}).bind("init.jstree",S.proxy(function(e,t){t.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh"),this._themeroller(t.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",S.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",S.proxy(function(e){this._themeroller()},this)).bind("close_node.jstree",S.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("delete_node.jstree",S.proxy(function(e,t){this._themeroller(t.rslt.parent)},this)).bind("correct_state.jstree",S.proxy(function(e,t){t.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",S.proxy(function(e,t){t.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",S.proxy(function(e,t){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",S.proxy(function(e,t){t.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",S.proxy(function(e,t){this.get_container().find("a."+a.item_h).not(t.rslt.obj).removeClass(a.item_h),t.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",S.proxy(function(e,t){this._themeroller(t.rslt.o),this._themeroller(t.rslt.op)},this))},__destroy:function(){var e=this._get_settings().themeroller,a=["ui-icon"];S.each(e,function(e,t){(t=t.split(" ")).length&&(a=a.concat(t))}),this.get_container().removeClass("ui-widget-content").find("."+a.join(", .")).removeClass(a.join(" "))},_fn:{_themeroller:function(e){var t=this._get_settings().themeroller;(e=(e=e&&-1!=e?this._get_node(e):this.get_container_ul())&&-1!=e?e.parent():this.get_container_ul()).find("li.jstree-closed").children("ins.jstree-icon").removeClass(t.opened).addClass("ui-icon "+t.closed).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_leaf+" "+t.item_open).addClass(t.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(t.closed).addClass("ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_leaf+" "+t.item_clsd).addClass(t.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(t.closed+" ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_clsd+" "+t.item_open).addClass(t.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}}),S(function(){S.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})}),(q=jQuery).jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",q.proxy(function(e,t){var a,s,i=[],n=!0;if("move_node"==t.func&&!0===t.args[4]&&t.args[0].o&&t.args[0].o.length&&(t.args[0].o.children("a").each(function(){i.push(q(this).text().replace(/^\s+/g,""))}),n=this._check_unique(i,t.args[0].np.find("> ul > li").not(t.args[0].o),"move_node")),"create_node"==t.func&&(t.args[4]||this._is_loaded(t.args[0]))&&(a=this._get_node(t.args[0]),!t.args[1]||"before"!==t.args[1]&&"after"!==t.args[1]||(a=this._get_parent(t.args[0]))&&-1!==a||(a=this.get_container()),"string"==typeof t.args[2]?i.push(t.args[2]):t.args[2]&&t.args[2].data?i.push(t.args[2].data):i.push(this._get_string("new_node")),n=this._check_unique(i,a.find("> ul > li"),"create_node")),"rename_node"==t.func&&(i.push(t.args[1]),s=this._get_node(t.args[0]),(a=this._get_parent(s))&&-1!==a||(a=this.get_container()),n=this._check_unique(i,a.find("> ul > li").not(s),"rename_node")),!n)return e.stopPropagation(),!1},this))},defaults:{error_callback:q.noop},_fn:{_check_unique:function(e,t,a){var s=[],i=!0;return t.children("a").each(function(){s.push(q(this).text().replace(/^\s+/g,""))}),!s.length||!e.length||(q.each(e,function(e,t){if(-1!==q.inArray(t,s))return i=!1}),i||this._get_settings().unique.error_callback.call(null,e,t,a),i)},check_move:function(){if(!this.__call_old())return!1;var e=this._get_move(),t=[];return!e.o||!e.o.length||(e.o.children("a").each(function(){t.push(q(this).text().replace(/^\s+/g,""))}),this._check_unique(t,e.np.find("> ul > li").not(e.o),"check_move"))}}}),(N=jQuery).jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1,this.data.wholerow.to=!1,this.get_container().bind("init.jstree",N.proxy(function(e,t){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",N.proxy(function(e,t){this._prepare_wholerow_span(t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",N.proxy(function(e,t){var a,s;this.data.to&&clearTimeout(this.data.to),this.data.to=setTimeout((a=this,s=t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1,function(){a._prepare_wholerow_ul(s)}),0)},this)).bind("deselect_all.jstree",N.proxy(function(e,t){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",N.proxy(function(e,t){t.rslt.obj.each(function(){t.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((N(this).offset().top-t.inst.get_container().offset().top+t.inst.get_container()[0].scrollTop)/t.inst.data.core.li_height,10)+")").children("a").attr("class",t.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",N.proxy(function(e,t){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:"")),"hover_node"===e.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((t.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",t.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(e){var t=N(e.currentTarget);"A"===e.target.tagName||"INS"===e.target.tagName&&t.closest("li").is(".jstree-open, .jstree-closed")||(t.closest("li").children("a:visible:eq(0)").click(),e.stopImmediatePropagation())}).delegate("li","mouseover.jstree",N.proxy(function(e){return e.stopImmediatePropagation(),N(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length||this.hover_node(e.currentTarget),!1},this)).delegate("li","mouseleave.jstree",N.proxy(function(e){N(e.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(e.currentTarget)},this)),(P||O)&&N.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove(),this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(e){!1!==(e=e&&-1!=e?this._get_node(e):this.get_container().find("> ul > li"))&&e.each(function(){N(this).find("li").addBack().each(function(){var e=N(this);if(e.children(".jstree-wholerow-span").length)return!0;e.prepend("<span class='jstree-wholerow-span' style='width:"+18*e.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var e=this.get_container().children("ul").eq(0),t=e.html();e.addClass("jstree-wholerow-real"),this.data.wholerow.last_html!==t&&(this.data.wholerow.last_html=t,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(e.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(e.parent()[0].scrollWidth).css("top",-1*(e.height()+(P?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}}),N(function(){var e=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";F&&(e+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } "),(P||O)&&(e+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } "),N.vakata.css.add_sheet({str:e,title:"jstree"})}),$=jQuery,D=["getChildren","getChildrenCount","getAttr","getName","getProps"],$.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(e,t){var a=-1==e?this._get_settings().model.object:e.data("jstree_model");if(!function(a,e){var s=!0;return a=a||{},e=[].concat(e),$.each(e,function(e,t){if(!$.isFunction(a[t]))return s=!1}),s}(a,D))return t.call(null,!1);this._get_settings().model.async?a.getChildren($.proxy(function(e){this.model_done(e,t)},this)):this.model_done(a.getChildren(),t)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(e,t){var s=[],i=this._get_settings(),n=this;$.isArray(e)||(e=[e]),$.each(e,function(e,t){var a=t.getProps()||{};a.attr=t.getAttr()||{},t.getChildrenCount()&&(a.state="closed"),a.data=t.getName(),$.isArray(a.data)||(a.data=[a.data]),n.data.types&&$.isFunction(t.getType)&&(a.attr[i.types.type_attr]=t.getType()),a.attr.id&&i.model.id_prefix&&(a.attr.id=i.model.id_prefix+a.attr.id),a.metadata||(a.metadata={}),a.metadata.jstree_model=t,s.push(a)}),t.call(null,s)}}})}}()},qd03:function(e,t){STUDIP.domReady(function(){$(document).on("change","tr.course input",function(e){STUDIP.Admission.toggleNotSavedAlert()}),$("a.userlist-delete-user").on("click",function(e){return $(this).closest("tr").remove(),!1})})}});
//# sourceMappingURL=studip-admission.js.map