{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/assets/javascripts/entry-raumzeit.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$","STUDIP","_","handleBlockAppointments","click","clicked_id","parseInt","this","id","split","pop","prop","document","ready","on","event","select","prev","me","undefined","data","Raumzeit","disableBookableRooms","children","clone","empty","append","parents","attr","length","singleDate","checked_dates","val","startDate","start_time","end_time","date_obj","ajax","type","url","ABSOLUTE_URI_STUDIP","rooms","map","options","selected_dates","singleDateID","new_date","success","result","isArray","not_bookable_rooms","v","text","trim","title","toLocaleString","join","each","preventDefault","show","Dialog","handlers","header","json","info","parseJSON","course_id","html","$button","next","removeAttr","start","end","defaultValue","jQuery","icon"],"mappings":"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","file":"javascripts/studip-raumzeit.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 62);\n","/*jslint browser: true, nomen: true */\n/*global jQuery, STUDIP, _ */\n\n(function ($, STUDIP, _) {\n    'use strict';\n\n    function handleBlockAppointments() {\n        $('#block_appointments_days input').click(function () {\n            var clicked_id = parseInt(this.id.split('_').pop(), 10);\n            if (clicked_id === 0 || clicked_id === 1) {\n                $('#block_appointments_days input:checkbox').prop('checked', function (i) {\n                    return i === clicked_id;\n                });\n            } else {\n                $('#block_appointments_days_0').prop('checked', false);\n                $('#block_appointments_days_1').prop('checked', false);\n            }\n        });\n    }\n\n    $(document).ready(handleBlockAppointments);\n    $(document).on('dialog-open dialog-update', handleBlockAppointments);\n\n    $(document).on('change', 'select[name=room_sd]', function () {\n        $('input[type=radio][name=room][value=room]').prop('checked', true);\n    });\n\n    $(document).on('focus', 'input[name=freeRoomText_sd]', function () {\n        $('input[type=radio][name=room][value=freetext]').prop('checked', true);\n    });\n\n    $(document).on('click', '.bookable_rooms_action', function (event) {\n        var select = $(this).prev('select')[0],\n            me = $(this);\n        if (select !== null && select !== undefined) {\n            if (me.data('state') === 'enabled') {\n                STUDIP.Raumzeit.disableBookableRooms(me);\n            } else {\n                if (me.data('options') === undefined) {\n                    me.data('options', $(select).children('option').clone(true));\n                } else {\n                    $(select).empty().append(me.data('options').clone(true));\n                }\n\n                if ($(this).parents('form').attr('action').split('saveDate/').length > 1) {\n                    var singleDate = $(this).parents('form').attr('action').split('saveDate/')[1].split('?')[0];\n                } else {\n                   var singleDate = undefined;\n                }\n                if ($( \"input[name='checked_dates']\" ).length > 0) {\n                    var checked_dates = $( \"input[name='checked_dates']\" ).val().split(',');\n                    var ndate = [];\n                } else {\n                    var checked_dates = [singleDate];\n                    var startDate = $( \"input[name='date']\" ).val();\n                    var start_time = $( \"input[name='start_time']\" ).val().split(':');\n                    var end_time = $( \"input[name='end_time']\" ).val().split(':');\n                    var date_obj = [{name: 'startDate', value: startDate},\n                        {name: 'start_stunde', value: start_time[0]},\n                        {name: 'start_minute', value: start_time[1]},\n                        {name: 'end_stunde', value: end_time[0]},\n                        {name: 'end_minute', value: end_time[1]}];\n                }\n\n                $.ajax({\n                    type: 'POST',\n                    url: STUDIP.ABSOLUTE_URI_STUDIP + 'dispatch.php/resources/helpers/bookable_rooms',\n                    data: {\n                        rooms: _.map(select.options, 'value'),\n                        selected_dates: checked_dates,\n                        singleDateID: singleDate,\n                        new_date: date_obj\n                    },\n                    success: function (result) {\n                        if ($.isArray(result)) {\n                            if (result.length) {\n                                var not_bookable_rooms = _.map(result, function (v) {\n                                    return $(select).children('option[value=' + v + ']').text().trim();\n                                });\n                                select.title = 'Nicht buchbare Räume:'.toLocaleString() + ' ' + not_bookable_rooms.join(', ');\n                            } else {\n                                select.title = '';\n                            }\n                            _.each(result, function (v) {\n                                $(select).children('option[value=' + v + ']').prop('disabled', true);\n                            });\n                        } else {\n                            select.title = '';\n                        }\n                        me.attr('title', 'Alle Räume anzeigen'.toLocaleString());\n                        me.data('state', 'enabled');\n                    }\n                });\n            }\n        }\n        event.preventDefault();\n    });\n\n    $(document).on('change', 'input[name=\"singledate[]\"]', function () {\n        STUDIP.Raumzeit.disableBookableRooms($('.bookable_rooms_action'));\n    });\n\n    $(document).on('ready', function () {\n        $('.bookable_rooms_action').show();\n    });\n\n    STUDIP.Dialog.handlers.header['X-Raumzeit-Update-Times'] = function (json) {\n        var info = $.parseJSON(json);\n        $('.course-admin #course-' + info.course_id + ' .raumzeit').html(info.html);\n    };\n\n    $(document).on('change', '.datesBulkActions', function () {\n        var $button = $(this).next('button');\n        if ($(this).val() === 'delete') {\n            $button.attr('data-confirm', 'Wollen Sie die gewünschten Termine wirklich löschen?'.toLocaleString());\n        } else {\n            if ($button.attr('data-confirm')) {\n                $button.removeAttr('data-confirm');\n            }\n        }\n    });\n\n    $(document).on('change', '#edit-cycle', function () {\n        var start = $('input[name=start_time]', this)[0],\n            end = $('input[name=end_time]', this)[0],\n            changed = start.defaultValue\n                && end.defaultValue\n                && (start.value !== start.defaultValue || end.value !== end.defaultValue);\n        // check if new time exceeds the current one and add security question if necessary\n        if (changed && (start.value < start.defaultValue || end.value > end.defaultValue)) {\n            $(this).attr('data-confirm', 'Wenn Sie die regelmäßige Zeit ändern, '\n                + 'verlieren Sie die Raumbuchungen für alle in der Zukunft liegenden Termine! '\n                + 'Sind Sie sicher, dass Sie die regelmäßige Zeit ändern möchten?'.toLocaleString());\n        } else {\n            // remove security question - not necessary (any more)\n            $(this).attr('data-confirm', null);\n        }\n    });\n}(jQuery, STUDIP, _));\n\nSTUDIP.Raumzeit = {\n    disableBookableRooms: function (icon) {\n        var select = $(icon).prev('select')[0];\n        var me = $(icon);\n        select.title = '';\n        $(select).children('option').each(function () {\n            $(this).prop('disabled', false);\n        });\n\n        me.attr('data-state', false);\n        me.attr('title', 'Nur buchbare Räume anzeigen'.toLocaleString());\n    }\n};\n"],"sourceRoot":""}